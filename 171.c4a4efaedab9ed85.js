"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[171],{7171:(ct,p,s)=>{s.r(p),s.d(p,{LookAtThePictureConfigModule:()=>at});var a=s(9808),L=s(7072),y=s(8035),Q=s(5059),Z=s(395),b=s(4636),S=s(5562),v=s(2747),M=s(3162),r=s(655),g=s(8929),k=s(567),x=s(1709),I=s(4850),O=s(864),c=s(2868),J=s(1692),C=s(6849),z=s(8744),T=s(8397),t=s(5e3),F=s(9082),G=s(2273);let A=(()=>{class n{constructor(o,i){this._addStepsService=o,this._translationsService=i}getQuestions(){const o=`games/look_at_the_picture/${T.J.getChosenTheme().id}/`+T.J.getChosenSetSegment(this._addStepsService.chosenSetIndex);return this._translationsService.loadTranslation(o)}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(F.S),t.LFG(G.f))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var f,u,w=s(9417),$=s(9771),Y=s(2986),D=s(8004),N=s(4873),U=s(9186),H=s(829);function R(n,e){if(1&n&&(t.TgZ(0,"div",6),t._uU(1),t.qZA()),2&n){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.value," ")}}function j(n,e){if(1&n&&t._UZ(0,"blot",7),2&n){const o=t.oxw().$implicit;t.Q6J("fill",o.value)}}function W(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"li",3),t.NdJ("click",function(){const P=t.CHM(o).$implicit;return t.oxw().variant$.next(P)}),t.YNc(1,R,2,1,"div",4),t.YNc(2,j,1,1,"blot",5),t.qZA()}if(2&n){const o=e.$implicit,i=t.oxw();t.Q6J("isCorrect",o.isCorrect),t.xp6(1),t.Q6J("ngIf",!i.isColor(o.value)),t.xp6(1),t.Q6J("ngIf",i.isColor(o.value))}}class l extends D.U{constructor(){super(),this.data=null,this.colors=$.r,this.variant$=new g.xQ,f.set(this,null)}ngOnInit(){super.onDataLoad(this.data),(0,r.YH)(this,f,this.variant$.pipe((0,Y.q)(1),(0,c.b)(e=>(0,r.mG)(this,void 0,void 0,function*(){e.isCorrect=this.data.isAnswerCorrect(e),e.isCorrect?yield w.d.playRightSound():yield w.d.playErrorSound(),this.emitData(e.isCorrect)}))).subscribe(),"f")}ngOnDestroy(){var e;null===(e=(0,r.Q_)(this,f,"f"))||void 0===e||e.unsubscribe()}isColor(e){return e.startsWith("#")||e.startsWith("rgb(")||e.startsWith("rgba(")}}f=new WeakMap,l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=t.Xpm({type:l,selectors:[["question"]],inputs:{data:"data"},features:[t.qOj],decls:6,vars:4,consts:[[1,"text--center","slide-in-fwd-center"],[1,"text--center"],["class","variant",3,"isCorrect","click",4,"ngFor","ngForOf"],[1,"variant",3,"isCorrect","click"],["class","variant--text",4,"ngIf"],[3,"fill",4,"ngIf"],[1,"variant--text"],[3,"fill"]],template:function(e,o){1&e&&(t.TgZ(0,"header"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"capitalizeFirstLetter"),t.qZA(),t.qZA(),t.TgZ(4,"ul",1),t.YNc(5,W,3,3,"li",2),t.qZA()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,o.data.question),"? "),t.xp6(3),t.Q6J("ngForOf",o.data.variants))},directives:[a.sg,N.T,a.O5,U.k],pipes:[H.G],styles:[".shake-horizontal[_ngcontent-%COMP%]{-webkit-animation:shake-horizontal .8s cubic-bezier(.455,.03,.515,.955) both;animation:shake-horizontal .8s cubic-bezier(.455,.03,.515,.955) both}@-webkit-keyframes shake-horizontal{0%,to{transform:translate(0)}10%,30%,50%,70%{transform:translate(-10px)}20%,40%,60%{transform:translate(10px)}80%{transform:translate(8px)}90%{transform:translate(-8px)}}@keyframes shake-horizontal{0%,to{transform:translate(0)}10%,30%,50%,70%{transform:translate(-10px)}20%,40%,60%{transform:translate(10px)}80%{transform:translate(8px)}90%{transform:translate(-8px)}}.slide-in-fwd-center[_ngcontent-%COMP%]{-webkit-animation:slide-in-fwd-center .4s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-fwd-center .4s cubic-bezier(.25,.46,.45,.94) both}@-webkit-keyframes slide-in-fwd-center{0%{transform:translateZ(-1400px);opacity:0}to{transform:translateZ(0);opacity:1}}@keyframes slide-in-fwd-center{0%{transform:translateZ(-1400px);opacity:0}to{transform:translateZ(0);opacity:1}}.pulsate-fwd[_ngcontent-%COMP%]{-webkit-animation:pulsate-fwd .5s ease-in-out infinite both;animation:pulsate-fwd .5s ease-in-out infinite both}@-webkit-keyframes pulsate-fwd{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes pulsate-fwd{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.variant[_ngcontent-%COMP%]{display:inline-block;margin:1rem;cursor:pointer}.variant--text[_ngcontent-%COMP%]{padding:.75rem;font-size:2rem;font-style:italic;color:#333;border-radius:.25rem;border:1px solid #9e9e9e;text-align:center;background-color:#fff;transition:.1s}.variant--text[_ngcontent-%COMP%]:hover{box-shadow:0 1px #fff,0 2px #fff,0 3px #fff,0 4px 2px #fff,1px 0 #fff,2px 0 #fff,3px 0 #fff,4px 0 2px #fff,0 -1px #fff,0 -2px #fff,0 -3px #fff,0 -4px 2px #fff,-1px 0 #fff,-2px 0 #fff,-3px 0 #fff,-4px 0 2px #fff;transform:scale(1.1)}"],changeDetection:0});class B{constructor(e){this.question="",this.variants=null,u.set(this,null),this.question=e.question,(0,r.YH)(this,u,e.answer,"f"),this.variants=e.variants.map((o,i)=>({value:o,index:i,isCorrect:null}))}isAnswerCorrect(e){return e.index===(0,r.Q_)(this,u,"f")}}u=new WeakMap;var d,E=s(2281),V=s(4853),X=s(550),K=s(8632),q=s(1643);const _=["variants"];function tt(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"progress-bar",7),t.NdJ("timeIsOver",function(){return t.CHM(o),t.oxw().hidePicture()}),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("time",o.time)}}function et(n,e){if(1&n&&t._UZ(0,"img",8),2&n){const o=t.oxw();t.Q6J("src",o.img,t.LSH)}}function ot(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"carousel",10,11),t.NdJ("emitDataFromItem",function(h){return t.CHM(o),t.oxw().answer$.next(h)}),t.qZA(),t.qZA()}if(2&n){const o=t.oxw();t.xp6(1),t.Q6J("slides",o.questions)("height","auto")("blockManualSwiping",!0)("itemComponent",o.questionComponent)}}class m{constructor(e,o,i){this._cdRef=e,this._lookAtThePictureService=o,this._themeItemsService=i,this.questionComponent=l,this.gameLoader=null,this.gameLoaded=!1,this.items=null,this.img="",this.time=20,this.showPicture=!0,this.answers=[],this.answer$=new g.xQ,d.set(this,null)}ngOnInit(){this._buildGame()}ngOnDestroy(){var e;null===(e=(0,r.Q_)(this,d,"f"))||void 0===e||e.unsubscribe()}_buildGame(){this.gameLoader=(0,k.D)({items:this._themeItemsService.getItems(),questions:this._lookAtThePictureService.getQuestions()}).pipe((0,x.zg)(e=>(this.img=e.items[0].img,e.questions)),(0,I.U)(e=>new B(e)),(0,O.q)(),(0,c.b)(e=>this.questions=e),(0,x.zg)(()=>z.O.getImage(this.img)),(0,c.b)(()=>this._setAnswerSubscription()))}hidePicture(){this.showPicture=!1,this._cdRef.detectChanges()}_setAnswerSubscription(){(0,r.YH)(this,d,this.answer$.pipe((0,c.b)(e=>{this.answers.push(e),this.variantsCarouselVCh.slideToRight(),this._cdRef.detectChanges()}),(0,J.j)(this.questions.length),(0,c.b)(e=>e.some(o=>!o)?C.A.gameFailed():C.A.gameCompleted())).subscribe(),"f")}}d=new WeakMap,m.\u0275fac=function(e){return new(e||m)(t.Y36(t.sBO),t.Y36(A),t.Y36(E.r))},m.\u0275cmp=t.Xpm({type:m,selectors:[["look-at-the-picture-and-answer"]],viewQuery:function(e,o){if(1&e&&t.Gf(_,5),2&e){let i;t.iGM(i=t.CRH())&&(o.variantsCarouselVCh=i.first)}},features:[t._Bn([A])],decls:7,vars:5,consts:[[3,"gameLoader","loadGame"],[1,"container"],[1,"w--100"],[3,"time","timeIsOver",4,"ngIf"],["class","picture",3,"src",4,"ngIf"],["class","w--100 overflow-x--hidden",4,"ngIf"],[3,"answers"],[3,"time","timeIsOver"],[1,"picture",3,"src"],[1,"w--100","overflow-x--hidden"],[3,"slides","height","blockManualSwiping","itemComponent","emitDataFromItem"],["variants",""]],template:function(e,o){1&e&&(t.TgZ(0,"game-spinner-wrapper",0),t.NdJ("loadGame",function(){return o.gameLoaded=!0}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.YNc(3,tt,1,1,"progress-bar",3),t.qZA(),t.YNc(4,et,1,1,"img",4),t.YNc(5,ot,3,4,"div",5),t._UZ(6,"answers-bar",6),t.qZA(),t.qZA()),2&e&&(t.Q6J("gameLoader",o.gameLoader),t.xp6(3),t.Q6J("ngIf",o.gameLoaded),t.xp6(1),t.Q6J("ngIf",o.showPicture&&o.img),t.xp6(1),t.Q6J("ngIf",!o.showPicture),t.xp6(1),t.Q6J("answers",o.answers))},directives:[V.Z,a.O5,X.r,K.R,q.F],styles:[".container[_ngcontent-%COMP%]{display:grid;height:100%;grid-auto-rows:-webkit-min-content 1fr -webkit-min-content;grid-auto-rows:min-content 1fr min-content;place-items:center}.picture[_ngcontent-%COMP%]{display:block;width:100%;max-width:600px;margin:auto}"],changeDetection:0});var nt=s(7316),st=s(933),it=s(1233);let rt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,st.q,v.U,it.D,nt.b]]}),n})(),at=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,Z.GameStepsModule.forChild([b.Z,Q.g,m]),S.P.forChild(),y.P.forChild(),rt,L.Bz.forChild(M.M),v.U]]}),n})()}}]);