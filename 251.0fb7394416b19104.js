"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[251],{251:(M,v,t)=>{t.r(v),t.d(v,{WhatTimeIsItConfig:()=>le});var u=t(7072),f=t(395),r=t(3162),l=t(9808),a=t(933),c=t(2747),d=t(7316),e=t(5e3);let s=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[l.ez,a.q,d.b,c.U]]}),i})();var g=t(655),I=t(8744),T=t(8004),A=t(5605),P=t(5713),W=t(8929);class m{static getHourHandAngle(o){return 30*o.hours+30*o.minutes/60}static getMinuteHandAngle(o){return 360*o.minutes/60}}m.answer$=new W.xQ,m.variants=[];var p=t(9417),S=t(8889),D=t(2188),y=t(1834);let B=(()=>{class i extends S.l{constructor(n,C,O,U){super(O,U),this._elementRef=n,this._renderer=C}setGameSizes(){const n=this._elementRef.nativeElement.getBoundingClientRect().width;this._renderer.setStyle(this._elementRef.nativeElement,D.L.FONT_SIZE,`${n/50}${y.N.REM}`)}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(l.K0))},i.\u0275dir=e.lG2({type:i,selectors:[["","adaptiveFontSizer",""]],features:[e.qOj]}),i})();var Z=t(9254);let Q=(()=>{class i{transform(n){return n<10?`0${n}`:`${n}`}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=e.Yjl({name:"time",type:i,pure:!0}),i})();var E,z;function w(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"span",3),e.NdJ("click",function(){const U=e.CHM(n).$implicit;return e.oxw(2).onVariantClick(U)}),e._uU(1),e.ALo(2,"time"),e.ALo(3,"time"),e.qZA()}if(2&i){const n=o.$implicit;e.xp6(1),e.AsE(" ",e.lcZ(2,2,n.hours),":",e.lcZ(3,4,n.minutes)," ")}}function J(i,o){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,w,4,6,"span",2),e.qZA()),2&i){const n=e.oxw();e.s9C("columnsAmount",n.variants.length),e.xp6(1),e.Q6J("ngForOf",n.variants)}}class R extends T.U{constructor(){super(...arguments),this.variants=null,E.set(this,null),z.set(this,!1)}ngOnInit(){this._fillVariants(),this.onDataLoad(this.data)}ngAfterViewInit(){this.adaptiveFontSizerD.forEach(o=>o.setGameSizes())}onVariantClick(o){return(0,g.mG)(this,void 0,void 0,function*(){if((0,g.Q_)(this,z,"f"))return;(0,g.YH)(this,z,!0,"f");const n=(0,g.Q_)(this,E,"f").hours===o.hours&&(0,g.Q_)(this,E,"f").minutes===o.minutes;yield n?p.d.playRightSound():p.d.playErrorSound(),m.answer$.next(n)})}_fillVariants(){const o=A.$.getRandItems(A.$.getSequence(13));o.length=P.k.getAgesConfig().variantsAmount,this.variants=o.map(n=>({hours:n,minutes:A.$.getRndArrElem(P.k.getAgesConfig().minutes)})),this.defineItemToCheck(),this.emitData((0,g.Q_)(this,E,"f"))}defineItemToCheck(){(0,g.YH)(this,E,A.$.getRndArrElem(this.variants),"f"),m.variants.push((0,g.Q_)(this,E,"f"))}}E=new WeakMap,z=new WeakMap,R.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(R)))(n||R)}}(),R.\u0275cmp=e.Xpm({type:R,selectors:[["item"]],viewQuery:function(o,n){if(1&o&&e.Gf(B,5),2&o){let C;e.iGM(C=e.CRH())&&(n.adaptiveFontSizerD=C)}},inputs:{data:"data"},features:[e.qOj],decls:1,vars:1,consts:[["class","variants","gridSizer","","rowsAmount","1","itemSize","200","coeff","0.5",3,"columnsAmount",4,"ngIf"],["gridSizer","","rowsAmount","1","itemSize","200","coeff","0.5",1,"variants",3,"columnsAmount"],["adaptiveFontSizer","","class","variants__item",3,"click",4,"ngFor","ngForOf"],["adaptiveFontSizer","",1,"variants__item",3,"click"]],template:function(o,n){1&o&&e.YNc(0,J,2,2,"div",0),2&o&&e.Q6J("ngIf",n.variants)},directives:[l.O5,Z.d,l.sg,B],pipes:[Q],styles:["@font-face{font-family:digital;src:url(digital.1859dc19b93399cb.ttf)}.variants[_ngcontent-%COMP%]{font-family:digital;cursor:pointer;font-size:3.5rem}.variants__item[_ngcontent-%COMP%]{padding:5px;background-color:#333;color:#0f0;border-radius:5px;border:8px solid #1a1a1a;display:flex;align-items:center;justify-content:center}"],changeDetection:0});var L,x=t(2868),j=t(1692),H=t(6849),$=t(4729),N=t(1995),V=t(8397),X=t(4475),b=t(631),K=t(850),k=t(4853),q=t(1643),ee=t(550);const te=["itemsCarousel"];function ne(i,o){1&i&&e.GkF(0)}function ie(i,o){1&i&&e.GkF(0)}function oe(i,o){if(1&i&&e._UZ(0,"img",11),2&i){const n=o.$implicit;e.Gre("hand d--block p--absolute hand--",n.modifier,""),e.Udp("transform","rotate("+n.hand.angle+"deg)"),e.Q6J("src",n.hand.img,e.LSH)}}const se=function(i){return{hand:i,modifier:"hour"}},Y=function(i){return{$implicit:i}},re=function(i){return{hand:i,modifier:"minute"}};class G{constructor(){this.gameLoader=null,this.answers=[],this.itemComponent=R,L.set(this,null),this.slides=A.$.getSequence(P.k.getAgesConfig().variantsAmount),this.clockwise=`${$.B.getGameFolder()}img/clockwise.${N.D.PNG}`,this.hourHand={img:`${$.B.getGameFolder()}img/hour_hand.${N.D.PNG}`,angle:0},this.minuteHand={img:`${$.B.getGameFolder()}img/minute_hand.${N.D.PNG}`,angle:0}}ngOnInit(){V.J.setChosenTheme(new X.m({id:b.v.CLOCKS},{})),this._buildGame()}ngOnDestroy(){var o;null===(o=(0,g.Q_)(this,L,"f"))||void 0===o||o.unsubscribe()}setTime(o){this.hourHand.angle=m.getHourHandAngle(o),this.minuteHand.angle=m.getMinuteHandAngle(o)}onLoadGame(){requestAnimationFrame(()=>this.imgWrapperVCh.setGameSizes())}_buildGame(){this.gameLoader=I.O.getImages([this.clockwise,this.hourHand.img,this.minuteHand.img]).pipe((0,x.b)(()=>(0,g.YH)(this,L,m.answer$.pipe((0,x.b)(o=>{this.answers.push(o),this.itemsCarouselVCh.slideToRight()}),(0,j.j)(this.slides.length),(0,x.b)(o=>o.some(n=>!n)?H.A.gameFailed():H.A.gameCompleted())).subscribe(),"f")))}}L=new WeakMap,G.\u0275fac=function(o){return new(o||G)},G.\u0275cmp=e.Xpm({type:G,selectors:[["what-time-is-it"]],viewQuery:function(o,n){if(1&o&&(e.Gf(te,5),e.Gf(K.z,5)),2&o){let C;e.iGM(C=e.CRH())&&(n.itemsCarouselVCh=C.first),e.iGM(C=e.CRH())&&(n.imgWrapperVCh=C.first)}},decls:13,vars:20,consts:[[3,"gameLoader","loadGame"],[1,"container","h-max--100"],["imgWrapper","",1,"h--100","overflow--hidden","p--relative",3,"img"],[1,"d--block","w-max--100","h-max--100",3,"src"],["clockwiseBg",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["clockHandTmpl",""],[1,"overflow-x--hidden","w--100"],[3,"slides","height","blockManualSwiping","itemComponent","emitDataFromItem"],["itemsCarousel",""],[3,"answers"],[3,"src"]],template:function(o,n){if(1&o&&(e.TgZ(0,"game-spinner-wrapper",0),e.NdJ("loadGame",function(){return n.onLoadGame()}),e.TgZ(1,"div",1),e.TgZ(2,"figure",2),e._UZ(3,"img",3,4),e.YNc(5,ne,1,0,"ng-container",5),e.YNc(6,ie,1,0,"ng-container",5),e.YNc(7,oe,1,6,"ng-template",null,6,e.W1O),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"carousel",8,9),e.NdJ("emitDataFromItem",function(O){return n.setTime(O)}),e.qZA(),e.qZA(),e._UZ(12,"answers-bar",10),e.qZA(),e.qZA()),2&o){const C=e.MAs(4),O=e.MAs(8);e.Q6J("gameLoader",n.gameLoader),e.xp6(2),e.Q6J("img",C),e.xp6(1),e.Q6J("src",n.clockwise,e.LSH),e.xp6(2),e.Q6J("ngTemplateOutlet",O)("ngTemplateOutletContext",e.VKq(14,Y,e.VKq(12,se,n.hourHand))),e.xp6(1),e.Q6J("ngTemplateOutlet",O)("ngTemplateOutletContext",e.VKq(18,Y,e.VKq(16,re,n.minuteHand))),e.xp6(4),e.Q6J("slides",n.slides)("height","100%")("blockManualSwiping",!0)("itemComponent",n.itemComponent),e.xp6(2),e.Q6J("answers",n.answers)}},directives:[k.Z,K.z,l.tP,q.F,ee.r],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr -webkit-min-content -webkit-min-content;grid-template-rows:1fr min-content min-content;place-items:center;grid-gap:1rem}.hand[_ngcontent-%COMP%]{transform-origin:bottom;transition:transform 1s;transition-timing-function:ease-in-out}.hand--hour[_ngcontent-%COMP%]{max-height:15%;top:47%;left:47%}.hand--minute[_ngcontent-%COMP%]{max-height:20%;top:41%;left:48%}"],changeDetection:0});var ae=t(4106),me=t(8450);let le=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[ae.f.forChild({agesConfig:new Map([[0,{variantsAmount:3,minutes:[0]}],[1,{variantsAmount:4,minutes:[0,30]}],[2,{variantsAmount:5,minutes:[0,15,30,45]}]])}),s,f.GameStepsModule.forChild([me.N,G]),u.Bz.forChild(r.M)]]}),i})()},4106:(M,v,t)=>{t.d(v,{f:()=>c});var u=t(9808),f=t(933),r=t(6007),l=t(1233),a=t(5e3);let c=(()=>{class d{static forChild(s){return{ngModule:d,providers:[{provide:r.n,useValue:s.agesConfig},{provide:r.O,useValue:s.stepsToReset}]}}}return d.\u0275fac=function(s){return new(s||d)},d.\u0275mod=a.oAB({type:d}),d.\u0275inj=a.cJS({imports:[[u.ez,l.D,f.q]]}),d})()},8450:(M,v,t)=>{t.d(v,{N:()=>F});var u=t(6849),f=t(9771);const r={0:f.r.PINK,1:f.r.ORANGE,2:f.r.GREEN},l={0:"3 - 4",1:"4 - 5",2:"5 - 6"};class a{constructor(_,m){this.id=_;const p=l[this.id];this.title=`${p} ${m[p]}`,this.color=r[this.id]}}var c=t(5713),d=t(6007),e=t(4850),s=t(5e3),g=t(2273),I=t(9808);let T=(()=>{class h{static _getStyleProp(m){return`style.${m}`}ngOnInit(){this._setDefaultColors()}onMouseEnter(){this.color=this.borderColor=f.r.WHITE,this.bgColor=this.age.color,this.boxShadow=`0 0 16px 3px ${f.r.LIGHT_GREY}`}onMouseLeave(){this._setDefaultColors()}_setDefaultColors(){this.color=this.borderColor=this.age.color,this.bgColor=f.r.WHITE,this.boxShadow="none"}}return h.\u0275fac=function(m){return new(m||h)},h.\u0275dir=s.lG2({type:h,selectors:[["","ageItemColorize",""]],hostVars:8,hostBindings:function(m,p){1&m&&s.NdJ("mouseenter",function(){return p.onMouseEnter()})("mouseleave",function(){return p.onMouseLeave()}),2&m&&s.Udp("color",p.color)("border-color",p.borderColor)("background-color",p.bgColor)("box-shadow",p.boxShadow)},inputs:{age:["ageItemColorize","age"]}}),h})();var A=t(829);function P(h,_){if(1&h){const m=s.EpF();s.TgZ(0,"div",4),s.NdJ("click",function(){const D=s.CHM(m).$implicit;return s.oxw(2).chooseAge(D)}),s._uU(1),s.qZA()}if(2&h){const m=_.$implicit;s.Q6J("ageItemColorize",m),s.xp6(1),s.hij(" ",m.title," ")}}function W(h,_){if(1&h&&(s.TgZ(0,"div",1),s.TgZ(1,"div",2),s._uU(2),s.ALo(3,"capitalizeFirstLetter"),s.qZA(),s.YNc(4,P,2,2,"div",3),s.qZA()),2&h){const m=_.ngIf;s.xp6(2),s.hij("",s.lcZ(3,2,m.title),"?"),s.xp6(2),s.Q6J("ngForOf",m.ages)}}let F=(()=>{class h{constructor(m,p,S){this._agesConfig=m,this._stepsToReset=p,this._translationsService=S,this.content$=this._translationsService.loadTranslation("ages").pipe((0,e.U)(D=>({title:D.title,ages:Array.from(this._agesConfig.keys()).map(y=>new a(y,D))})))}ngOnInit(){c.k.setAgesConfig(this._agesConfig),this._stepsToReset&&u.A.resetSteps(this._stepsToReset)}chooseAge(m){c.k.setAgeId(m.id),u.A.updateStepInfo({title:m.title,style:{color:m.color}}),u.A.goToNext()}}return h.\u0275fac=function(m){return new(m||h)(s.Y36(d.n),s.Y36(d.O),s.Y36(g.f))},h.\u0275cmp=s.Xpm({type:h,selectors:[["age-choice"]],decls:2,vars:3,consts:[["class","ages-choice",4,"ngIf"],[1,"ages-choice"],[1,"ages-choice__title"],["class","ages-choice__age",3,"ageItemColorize","click",4,"ngFor","ngForOf"],[1,"ages-choice__age",3,"ageItemColorize","click"]],template:function(m,p){1&m&&(s.YNc(0,W,5,4,"div",0),s.ALo(1,"async")),2&m&&s.Q6J("ngIf",s.lcZ(1,1,p.content$))},directives:[I.O5,I.sg,T],pipes:[I.Ov,A.G],styles:[".ages-choice__title[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;font-size:3rem;color:#70b}.ages-choice__age[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:2rem auto;padding:.5rem;text-align:center;font-size:2rem;font-weight:bolder;border:2px solid;border-radius:50%;cursor:pointer}"],changeDetection:0}),h})()},6007:(M,v,t)=>{t.d(v,{n:()=>f,O:()=>r});var u=t(5e3);const f=new u.OlP("AGES_CONFIG_TOKEN"),r=new u.OlP("STEPS_TO_RESET_TOKEN")},9254:(M,v,t)=>{t.d(v,{d:()=>d});var u=t(9808),f=t(2188),r=t(4729),l=t(8889),a=t(1834),c=t(5e3);let d=(()=>{class e extends l.l{constructor(g,I,T,A){super(T,A),this._elementRef=g,this._renderer=I,this.rowsAmount=1,this.columnsAmount=1,this.itemSize=300,this.coeff=1}ngOnInit(){super.ngOnInit(),this._renderer.setStyle(this._elementRef.nativeElement,f.L.DISPLAY,"grid"),this._renderer.setStyle(this._elementRef.nativeElement,f.L.GRID_GAP,`0.5${a.N.REM}`),this._renderer.setStyle(this._elementRef.nativeElement,f.L.JUSTIFY_CONTENT,"center")}setGameSizes(){const g=Math.min(this.itemSize,r.B.getGridContainerMinDimension()/Math.max(this.rowsAmount,this.columnsAmount)-12);this._renderer.setStyle(this._elementRef.nativeElement,f.L.GRID_TEMPLATE_COLUMNS,`repeat(${this.columnsAmount}, ${g}${a.N.PX})`),this._renderer.setStyle(this._elementRef.nativeElement,f.L.GRID_TEMPLATE_ROWS,`repeat(${this.rowsAmount}, ${g*this.coeff}${a.N.PX})`)}}return e.\u0275fac=function(g){return new(g||e)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.R0b),c.Y36(u.K0))},e.\u0275dir=c.lG2({type:e,selectors:[["","gridSizer",""]],inputs:{rowsAmount:"rowsAmount",columnsAmount:"columnsAmount",itemSize:"itemSize",coeff:"coeff"},features:[c.qOj]}),e})()},850:(M,v,t)=>{t.d(v,{z:()=>c});var u=t(9808),f=t(8889),r=t(2188),l=t(1834),a=t(5e3);let c=(()=>{class d extends f.l{constructor(s,g,I,T){super(I,T),this._elementRef=s,this._renderer=g,this.img=null}setGameSizes(){var s;this._renderer.removeStyle(this._elementRef.nativeElement,r.L.MAX_WIDTH);const g=null===(s=this.img)||void 0===s?void 0:s.getBoundingClientRect().width;g&&this._renderer.setStyle(this._elementRef.nativeElement,r.L.MAX_WIDTH,`${g}${l.N.PX}`)}}return d.\u0275fac=function(s){return new(s||d)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.R0b),a.Y36(u.K0))},d.\u0275dir=a.lG2({type:d,selectors:[["","imgWrapper",""]],inputs:{img:"img"},features:[a.qOj]}),d})()},5605:(M,v,t)=>{t.d(v,{$:()=>u});class u{static shuffle(r){if(r.length<1)return console.warn("Empty array!"),r;const l=[...r];for(;!u._isArrShuffled(r,l);)l.sort(()=>Math.random()-.5);return l}static _isArrShuffled(r,l){let a=!1;for(const[c,d]of r.entries())if(d!==l[c]){a=!0;break}return a}static getRandItems(r,l=r.length){if(l>r.length)throw new Error(`maxArrLength ${l} should be equal or less than items length ${r.length}`);const a=u.shuffle(r);return a.length=l,a}static getDoubledRandItems(r,l=r.length){const a=u.getRandItems(r,l);return u.shuffle([...a,...a])}static uniq(r){return Array.from(new Set(r))}static getSequence(r,l=0){const a=[];for(let c=l;c<r;c++)a.push(c);return a}static groupArrByLength(r,l){const a=new Map;let c=0,d=0,e=0;for(;e<r.length;)d=c*l,e=d+l,a.set(c,r.slice(d,e)),c++;return a}static getRndInteger(r,l){return Math.floor(Math.random()*(l-r))+r}static getRndArrElem(r){return r[u.getRndInteger(0,r.length)]}}}}]);