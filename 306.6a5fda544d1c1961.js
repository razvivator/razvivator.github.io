"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[306],{6330:(I,E,e)=>{e.d(E,{a:()=>g});var t=e(9771);const g=[{id:"themes",color:t.r.BLUE},{id:"memory",color:t.r.GREEN},{id:"attention",color:t.r.ORANGE},{id:"intellect",color:t.r.PINK}]},6998:(I,E,e)=>{e.r(E),e.d(E,{FindWordsInTableConfigModule:()=>w});var W,t=e(9808),g=e(7072),r=e(395),o=e(4636),l=e(5562),a=e(3162),_=e(655),n=e(9771),v=e(2188),c=e(6849),C=e(5605),d=e(9417),T=e(2281),U=e(8929),y=e(567),x=e(5254),Z=e(9146),M=e(2198),P=e(864),f=e(2868),p=e(1709),L=e(373),A=e(4850),B=e(7545),F=e(8077),b=e(6792),s=e(5e3),$=e(2273),z=e(4853),K=e(3832);function G(h,i){if(1&h){const m=s.EpF();s.TgZ(0,"td",7),s.NdJ("click",function(){const R=s.CHM(m).$implicit,Q=s.oxw().$implicit;return s.oxw().letter$.next({letter:R,word:Q})}),s._uU(1),s.qZA()}if(2&h){const m=i.$implicit,u=s.oxw().$implicit,O=s.oxw();s.Udp("opacity",u.completed&&!m.checked?.5:1)("color",m.checked?O.colors.BLUE:O.colors.DARK_GREY),s.xp6(1),s.hij(" ",m.letter," ")}}function J(h,i){if(1&h&&(s.TgZ(0,"tr",5),s.YNc(1,G,2,5,"td",6),s.qZA()),2&h){const m=i.$implicit;s.xp6(1),s.Q6J("ngForOf",m.word)}}class S{constructor(i,m){this._themeItemsService=i,this._translationsService=m,this.gameLoader=null,this.items=null,this.matrix=null,this.colors=n.r,this.letter$=new U.xQ,W.set(this,null)}ngOnInit(){this._buildGame()}ngOnDestroy(){var i;null===(i=(0,_.Q_)(this,W,"f"))||void 0===i||i.unsubscribe()}_buildGame(){this.gameLoader=this._themeItemsService.getItems().pipe((0,Z.J)(),(0,M.h)(i=>i.title.length<=12&&1===i.title.split(" ").length),(0,P.q)(),(0,f.b)(i=>this.items=C.$.getRandItems(i,8)),(0,p.zg)(()=>this._buildMatrix(this.items)),(0,f.b)(()=>this._setSubscription()),(0,p.zg)(()=>(0,y.D)([d.d.preloadThemeItemsTitleSounds(this.items),T.r.preloadThemeItemsImgs(this.items)])))}_buildMatrix(i){return this._translationsService.loadTranslation("games/find_words_in_table").pipe((0,p.zg)(m=>(0,x.D)(C.$.shuffle(i)).pipe((0,L.j)("title"),(0,A.U)(u=>u.toUpperCase()),(0,p.zg)(u=>{const O=[u];for(let R=0;R<12-u.length;R++)O.push(C.$.getRndArrElem(this._getDictionary(u,m)));return(0,x.D)(C.$.shuffle(O).join("")).pipe((0,A.U)(R=>({letter:R,checked:!1})),(0,P.q)())}),(0,A.U)(u=>({word:u,completed:!1})),(0,P.q)(),(0,f.b)(u=>this.matrix=u))))}_getDictionary(i,m){const u=[];for(let O=m.first_letter.charCodeAt(0);O<=m.last_letter.charCodeAt(0);O++)`${m.forbidden_letters}${i[0]}${i.slice(-1)}`.includes(String.fromCharCode(O))||u.push(String.fromCharCode(O));return u}_setSubscription(){(0,_.YH)(this,W,this.letter$.pipe((0,M.h)(i=>!i.word.completed),(0,A.U)(i=>(i.letter.checked=!i.letter.checked,i.word)),(0,B.w)(i=>(0,x.D)(i.word).pipe((0,M.h)(m=>m.checked),(0,L.j)("letter"),(0,F.u)((m,u)=>m+u,""),(0,A.U)(m=>this.items.find(u=>u.title.toLowerCase()===m.toLowerCase())),(0,M.h)(Boolean),(0,f.b)(()=>i.completed=!0))),(0,f.b)(i=>i.titleStyle={[v.L.OPACITY]:.5,[v.L.TEXT_DECORATION]:"line-through"}),(0,B.w)(i=>(0,_.mG)(this,void 0,void 0,function*(){return yield i.playTitle()})),(0,M.h)(()=>!this.matrix.some(i=>!i.completed)),(0,b.g)(200),(0,f.b)(()=>c.A.gameCompleted())).subscribe(),"f")}}W=new WeakMap,S.\u0275fac=function(i){return new(i||S)(s.Y36(T.r),s.Y36($.f))},S.\u0275cmp=s.Xpm({type:S,selectors:[["find-words-in-table"]],decls:6,vars:4,consts:[[3,"gameLoader"],[1,"container"],[1,"table"],["class","table__row",4,"ngFor","ngForOf"],[3,"items","showTitle"],[1,"table__row"],["class","table__cell radial-gradient--soft-grey","align","center",3,"opacity","color","click",4,"ngFor","ngForOf"],["align","center",1,"table__cell","radial-gradient--soft-grey",3,"click"]],template:function(i,m){1&i&&(s.TgZ(0,"game-spinner-wrapper",0),s.TgZ(1,"div",1),s.TgZ(2,"table",2),s.TgZ(3,"tbody"),s.YNc(4,J,2,1,"tr",3),s.qZA(),s.qZA(),s._UZ(5,"theme-items-bar",4),s.qZA(),s.qZA()),2&i&&(s.Q6J("gameLoader",m.gameLoader),s.xp6(4),s.Q6J("ngForOf",m.matrix),s.xp6(1),s.Q6J("items",m.items)("showTitle",!0))},directives:[z.Z,t.sg,K.M],styles:[".radial-gradient--soft-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#f0f0f0)}.radial-gradient--medium-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#dbdbdb)}.container[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-rows:1fr -webkit-min-content;grid-template-rows:1fr min-content}.table[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:auto;border-spacing:.5rem}.table__cell[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #9e9e9e;border-radius:5px;font-size:2rem;cursor:pointer}.table__cell[_ngcontent-%COMP%]:hover{font-weight:700}@media screen and (max-width: 1024px){.table__cell[_ngcontent-%COMP%]{font-size:1.5rem}}@media screen and (max-width: 767px){.table__cell[_ngcontent-%COMP%]{padding:0;font-size:1rem}}"],changeDetection:0});var N=e(933);let Y=(()=>{class h{}return h.\u0275fac=function(m){return new(m||h)},h.\u0275mod=s.oAB({type:h}),h.\u0275inj=s.cJS({imports:[[t.ez,N.q,l.P.forChild()]]}),h})(),w=(()=>{class h{}return h.\u0275fac=function(m){return new(m||h)},h.\u0275mod=s.oAB({type:h}),h.\u0275inj=s.cJS({imports:[[t.ez,r.GameStepsModule.forChild([o.Z,S]),l.P.forChild(),Y,g.Bz.forChild(a.M)]]}),h})()},9254:(I,E,e)=>{e.d(E,{d:()=>_});var t=e(9808),g=e(2188),r=e(4729),o=e(8889),l=e(1834),a=e(5e3);let _=(()=>{class n extends o.l{constructor(c,C,d,T){super(d,T),this._elementRef=c,this._renderer=C,this.rowsAmount=1,this.columnsAmount=1,this.itemSize=300,this.coeff=1}ngOnInit(){super.ngOnInit(),this._renderer.setStyle(this._elementRef.nativeElement,g.L.DISPLAY,"grid"),this._renderer.setStyle(this._elementRef.nativeElement,g.L.GRID_GAP,`0.5${l.N.REM}`),this._renderer.setStyle(this._elementRef.nativeElement,g.L.JUSTIFY_CONTENT,"center")}setGameSizes(){const c=Math.min(this.itemSize,r.B.getGridContainerMinDimension()/Math.max(this.rowsAmount,this.columnsAmount)-12);this._renderer.setStyle(this._elementRef.nativeElement,g.L.GRID_TEMPLATE_COLUMNS,`repeat(${this.columnsAmount}, ${c}${l.N.PX})`),this._renderer.setStyle(this._elementRef.nativeElement,g.L.GRID_TEMPLATE_ROWS,`repeat(${this.rowsAmount}, ${c*this.coeff}${l.N.PX})`)}}return n.\u0275fac=function(c){return new(c||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.R0b),a.Y36(t.K0))},n.\u0275dir=a.lG2({type:n,selectors:[["","gridSizer",""]],inputs:{rowsAmount:"rowsAmount",columnsAmount:"columnsAmount",itemSize:"itemSize",coeff:"coeff"},features:[a.qOj]}),n})()},9513:(I,E,e)=>{e.d(E,{n:()=>_});var a,t=e(655),g=e(8744),r=e(2986),o=e(2868),l=e(5e3);class _{constructor(v,c){this._elementRef=v,this._renderer=c,a.set(this,null)}ngOnInit(){if("IMG"!==this._elementRef.nativeElement.tagName)throw new Error("Element should be an image");(0,t.YH)(this,a,g.O.getImage(this.src).pipe((0,r.q)(1),(0,o.b)(v=>this._renderer.setAttribute(this._elementRef.nativeElement,"src",v.src))).subscribe(),"f")}ngOnDestroy(){var v;null===(v=(0,t.Q_)(this,a,"f"))||void 0===v||v.unsubscribe()}}a=new WeakMap,_.\u0275fac=function(v){return new(v||_)(l.Y36(l.SBq),l.Y36(l.Qsj))},_.\u0275dir=l.lG2({type:_,selectors:[["","preloadImg",""]],inputs:{src:["preloadImg","src"]}})},3162:(I,E,e)=>{e.d(E,{M:()=>t});const t=[{path:"",loadChildren:()=>Promise.resolve().then(e.bind(e,395)).then(g=>g.GameStepsModule)}]},9117:(I,E,e)=>{e.d(E,{W:()=>g});var t=e(2273);class g{constructor(o){this.id=null,this.title="",this.color="",this.route="",this.id=o.id,this.title=t.f.getTranslation(o.id),this.color=o.color,this.route=`${this.id}`}}},5605:(I,E,e)=>{e.d(E,{$:()=>t});class t{static shuffle(r){if(r.length<1)return console.warn("Empty array!"),r;const o=[...r];for(;!t._isArrShuffled(r,o);)o.sort(()=>Math.random()-.5);return o}static _isArrShuffled(r,o){let l=!1;for(const[a,_]of r.entries())if(_!==o[a]){l=!0;break}return l}static getRandItems(r,o=r.length){if(o>r.length)throw new Error(`maxArrLength ${o} should be equal or less than items length ${r.length}`);const l=t.shuffle(r);return l.length=o,l}static getDoubledRandItems(r,o=r.length){const l=t.getRandItems(r,o);return t.shuffle([...l,...l])}static uniq(r){return Array.from(new Set(r))}static getSequence(r,o=0){const l=[];for(let a=o;a<r;a++)l.push(a);return l}static groupArrByLength(r,o){const l=new Map;let a=0,_=0,n=0;for(;n<r.length;)_=a*o,n=_+o,l.set(a,r.slice(_,n)),a++;return l}static getRndInteger(r,o){return Math.floor(Math.random()*(o-r))+r}static getRndArrElem(r){return r[t.getRndInteger(0,r.length)]}}},4636:(I,E,e)=>{e.d(E,{Z:()=>Z});var t=e(9424),g=e(4375),r=e(9771),o=e(6849),l=e(8397),a=e(2868),_=e(2273),n=e(5e3),v=e(2205),c=e(5316),C=e(5610),d=e(965),T=e(9808),D=e(9513),U=e(8550),y=e(829);function x(M,P){if(1&M){const f=n.EpF();n.TgZ(0,"figure",5),n.NdJ("click",function(L){const B=n.CHM(f).$implicit;return n.oxw().selectIcon(L,B)}),n._UZ(1,"img",6),n.TgZ(2,"figcaption"),n.TgZ(3,"div",7),n._uU(4),n.ALo(5,"capitalizeFirstLetter"),n.qZA(),n.qZA(),n.qZA()}if(2&M){const f=P.$implicit;n.xp6(1),n.Q6J("preloadImg",f.icon),n.xp6(3),n.Oqu(n.lcZ(5,2,f.title))}}let Z=(()=>{class M extends g.Q{constructor(f,p){super(p),this._themesService=f,this.cdRef=p,this.category=t.G.getCategoryById("themes"),this.title=_.f.getTranslation("choose_theme"),this.searchPlaceHolder=`${_.f.getTranslation("search_theme")}...`,this.list$=null}selectIcon(f,p){f.stopPropagation(),l.J.setChosenTheme(p),o.A.updateStepInfo({title:p.title,style:{color:r.r.BLUE}}),o.A.goToNext()}buildList(){this.list$=this._themesService.getThemes().pipe((0,a.b)(()=>this.showList()))}}return M.\u0275fac=function(f){return new(f||M)(n.Y36(v.O),n.Y36(n.sBO))},M.\u0275cmp=n.Xpm({type:M,selectors:[["theme-choice"]],features:[n.qOj],decls:7,vars:10,consts:[[3,"category","title"],[3,"placeHolder","searchStrInput"],[3,"loaded"],[1,"list"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"list-item__img",3,"preloadImg"],[1,"list-item__title"]],template:function(f,p){1&f&&(n._UZ(0,"category-title",0),n.TgZ(1,"search-input",1),n.NdJ("searchStrInput",function(A){return p.searchStr=A}),n.qZA(),n.TgZ(2,"spinner-wrapper",2),n.TgZ(3,"div",3),n.YNc(4,x,6,4,"figure",4),n.ALo(5,"filterIcons"),n.ALo(6,"async"),n.qZA(),n.qZA()),2&f&&(n.Q6J("category",p.category)("title",p.title),n.xp6(1),n.Q6J("placeHolder",p.searchPlaceHolder),n.xp6(1),n.Q6J("loaded",p.loaded),n.xp6(2),n.Q6J("ngForOf",n.xi3(5,5,n.lcZ(6,8,p.list$),p.searchStr)))},directives:[c.a,C.J,d.C,T.sg,D.n],pipes:[U.V,T.Ov,y.G],styles:[".list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:3rem}.list-item[_ngcontent-%COMP%]{padding:10px;border-radius:30px 0;box-shadow:0 0 10px 18px #ffffffbf;background-color:#ffffffbf;border:solid 2px rgba(158,158,158,.15);cursor:pointer}.list-item[_ngcontent-%COMP%]:hover{background-color:#ffffffe6;border-color:#9e9e9e4d}.list-item__img[_ngcontent-%COMP%]{display:block;margin:auto}.list-item__title[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}"],changeDetection:0}),M})()},3832:(I,E,e)=>{e.d(E,{M:()=>v});var t=e(5e3),g=e(9808),r=e(9254),o=e(829);function l(c,C){if(1&c&&(t.TgZ(0,"header",2),t._uU(1),t.ALo(2,"capitalizeFirstLetter"),t.qZA()),2&c){const d=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,d.header))}}function a(c,C){if(1&c&&(t.TgZ(0,"figcaption",8),t._uU(1),t.qZA()),2&c){const d=t.oxw().$implicit;t.Q6J("ngStyle",d.titleStyle),t.xp6(1),t.hij(" ",d.title," ")}}function _(c,C){if(1&c){const d=t.EpF();t.TgZ(0,"figure",5),t.TgZ(1,"img",6),t.NdJ("click",function(D){const y=t.CHM(d).$implicit;return t.oxw(2).onItemClick(D,y)}),t.qZA(),t.YNc(2,a,2,2,"figcaption",7),t.qZA()}if(2&c){const d=C.$implicit,T=t.oxw(2);t.xp6(1),t.Q6J("src",d.img,t.LSH)("ngStyle",d.imgStyle),t.xp6(1),t.Q6J("ngIf",T.showTitle)}}function n(c,C){if(1&c&&(t.TgZ(0,"div",3),t.YNc(1,_,3,3,"figure",4),t.qZA()),2&c){const d=t.oxw();t.s9C("columnsAmount",d.items.length),t.xp6(1),t.Q6J("ngForOf",d.items)}}let v=(()=>{class c{constructor(){this.items=[],this.header="",this.showTitle=!1,this.itemClick=new t.vpe}onItemClick(d,T){d.stopPropagation(),this.itemClick.emit(T)}}return c.\u0275fac=function(d){return new(d||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["theme-items-bar"]],inputs:{items:"items",header:"header",showTitle:"showTitle"},outputs:{itemClick:"itemClick"},decls:2,vars:2,consts:[["class","header text--center",4,"ngIf"],["gridSizer","","itemSize","100",3,"columnsAmount",4,"ngIf"],[1,"header","text--center"],["gridSizer","","itemSize","100",3,"columnsAmount"],["class","figure d--flex m--auto h--100",4,"ngFor","ngForOf"],[1,"figure","d--flex","m--auto","h--100"],[1,"figure__img","d--block","m--auto","cursor--pointer",3,"src","ngStyle","click"],["class","figure__title text--center",3,"ngStyle",4,"ngIf"],[1,"figure__title","text--center",3,"ngStyle"]],template:function(d,T){1&d&&(t.YNc(0,l,3,3,"header",0),t.YNc(1,n,2,2,"div",1)),2&d&&(t.Q6J("ngIf",T.header),t.xp6(1),t.Q6J("ngIf",null==T.items?null:T.items.length))},directives:[g.O5,r.d,g.sg,g.PC],pipes:[o.G],styles:[".radial-gradient--soft-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#f0f0f0)}.radial-gradient--medium-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#dbdbdb)}.header[_ngcontent-%COMP%]{font-size:2rem;font-style:italic}@media screen and (max-width: 567px){.header[_ngcontent-%COMP%]{font-size:1rem}}.figure[_ngcontent-%COMP%]{flex-direction:column}.figure__img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.figure__title[_ngcontent-%COMP%]{font-size:1.25rem}@media screen and (max-width: 567px){.figure__title[_ngcontent-%COMP%]{font-size:1rem}}@media screen and (max-width: 480px){.figure__title[_ngcontent-%COMP%]{display:none}}"]}),c})()}}]);