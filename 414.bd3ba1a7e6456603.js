"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[414],{6330:(M,p,t)=>{t.d(p,{a:()=>_});var a=t(9771);const _=[{id:"themes",color:a.r.BLUE},{id:"memory",color:a.r.GREEN},{id:"attention",color:a.r.ORANGE},{id:"intellect",color:a.r.PINK}]},3548:(M,p,t)=>{t.r(p),t.d(p,{RotateItemConfigModule:()=>G});var a=t(9808),_=t(4106),s=t(5562),i=t(395),l=t(8450),c=t(4636),m=t(933),o=t(2747),e=t(5e3);let O=(()=>{class u{}return u.\u0275fac=function(d){return new(d||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[[a.ez,m.q,o.U]]}),u})();var E,r,C=t(655),I=t(5713),A=t(6849),T=t(5605),D=t(2281),y=t(2188),f=t(1834);class h{constructor(n,d){this._elementRef=n,this._renderer=d,this.angle=180*T.$.getRndInteger(0,2),E.set(this,!1),r.set(this,!1),this.rotated=new e.vpe}ngOnInit(){this._setStyle()}_setStyle(){const n=this._elementRef.nativeElement;this._renderer.setStyle(n,y.L.TRANSFORM,`rotate(${this.angle}${f.N.DEG})`),this._renderer.setStyle(n,y.L.TRANSITION,"transform 0.5s ease-in-out")}onClick(){(0,C.Q_)(this,E,"f")||(0,C.Q_)(this,r,"f")||((0,C.YH)(this,E,!0,"f"),this.rotate(),this.rotated.emit())}onTransitionend(){(0,C.YH)(this,E,!1,"f")}rotate(){this.angle+=180,this._setStyle()}finish(){(0,C.YH)(this,r,!0,"f")}}E=new WeakMap,r=new WeakMap,h.\u0275fac=function(n){return new(n||h)(e.Y36(e.SBq),e.Y36(e.Qsj))},h.\u0275dir=e.lG2({type:h,selectors:[["","itemRotate",""]],hostBindings:function(n,d){1&n&&e.NdJ("click",function(){return d.onClick()})("transitionend",function(){return d.onTransitionend()})},outputs:{rotated:"rotated"}});var b,v=t(8929),g=t(2868),R=t(1709),L=t(2198),B=t(6792),x=t(4853),N=t(9254);function W(u,n){if(1&u){const d=e.EpF();e.TgZ(0,"figure",3),e.TgZ(1,"img",4),e.NdJ("rotated",function(){const K=e.CHM(d).index;return e.oxw().onRotate$.next(K)}),e.qZA(),e.qZA()}if(2&u){const d=n.$implicit;e.xp6(1),e.Q6J("src",d.img,e.LSH)}}class S{constructor(n){this._themeItemsService=n,this.gameLoader=null,this.items=null,this.onRotate$=new v.xQ,this.rowsAmount=4,this.columnsAmount=4,b.set(this,null)}ngOnInit(){this._buildGame()}ngOnDestroy(){var n;null===(n=(0,C.Q_)(this,b,"f"))||void 0===n||n.unsubscribe()}_buildGame(){this.gameLoader=this._themeItemsService.getItems().pipe((0,g.b)(n=>{this.items=T.$.shuffle(n);const d=this.rowsAmount*this.columnsAmount;if(this.items.length<d)for(;this.items.length<d;){const P=T.$.getRndInteger(0,this.items.length);this.items.push(this.items[P])}else this.items.length=d;this._setSubscriptions()}),(0,R.zg)(()=>D.r.preloadThemeItemsImgs(this.items)))}_setSubscriptions(){const n=d=>d.angle%360>0;(0,C.YH)(this,b,this.onRotate$.pipe((0,g.b)(d=>this._rotateNeighbours(d)),(0,L.h)(()=>!this.itemsD.some(n)),(0,g.b)(()=>this.itemsD.forEach(d=>d.finish())),(0,B.g)(1e3),(0,g.b)(()=>A.A.gameCompleted())).subscribe(),"f")}_rotateNeighbours(n){1===I.k.getAgeId()&&(this._rotateNext(n),this._rotateBottom(n)),2===I.k.getAgeId()&&(this._rotateTop(n),this._rotateNext(n),this._rotateBottom(n),this._rotatePrev(n))}_rotateNext(n){(n+1)%this.columnsAmount!=0&&this._rotateNeighbour(n+1)}_rotatePrev(n){n%this.columnsAmount!=0&&this._rotateNeighbour(n-1)}_rotateTop(n){this._rotateNeighbour(n-this.columnsAmount)}_rotateBottom(n){this._rotateNeighbour(n+this.columnsAmount)}_rotateNeighbour(n){var d;null===(d=this.itemsD.find((P,U)=>U===n))||void 0===d||d.rotate()}}b=new WeakMap,S.\u0275fac=function(n){return new(n||S)(e.Y36(D.r))},S.\u0275cmp=e.Xpm({type:S,selectors:[["rotate-item"]],viewQuery:function(n,d){if(1&n&&e.Gf(h,5),2&n){let P;e.iGM(P=e.CRH())&&(d.itemsD=P)}},decls:3,vars:4,consts:[[3,"gameLoader"],["gridSizer","",3,"rowsAmount","columnsAmount"],["class","figure curve-border border-width--1 border--dashed border--purple radial-gradient--soft-grey",4,"ngFor","ngForOf"],[1,"figure","curve-border","border-width--1","border--dashed","border--purple","radial-gradient--soft-grey"],["itemRotate","",1,"figure__img","cursor--pointer",3,"src","rotated"]],template:function(n,d){1&n&&(e.TgZ(0,"game-spinner-wrapper",0),e.TgZ(1,"div",1),e.YNc(2,W,2,1,"figure",2),e.qZA(),e.qZA()),2&n&&(e.Q6J("gameLoader",d.gameLoader),e.xp6(1),e.s9C("rowsAmount",d.rowsAmount),e.s9C("columnsAmount",d.columnsAmount),e.xp6(1),e.Q6J("ngForOf",d.items))},directives:[x.Z,N.d,a.sg,h],styles:[".figure[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.figure__img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.radial-gradient--soft-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#f0f0f0)}.radial-gradient--medium-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#dbdbdb)}.curve-border[_ngcontent-%COMP%]{border-radius:80px 10px 80px 20px/20px 40px}.border-width--1[_ngcontent-%COMP%]{border-width:1px}.border-width--2[_ngcontent-%COMP%]{border-width:2px}.border-width--3[_ngcontent-%COMP%]{border-width:3px}.border-width--4[_ngcontent-%COMP%]{border-width:4px}.border--solid[_ngcontent-%COMP%]{border-style:solid}.border--dashed[_ngcontent-%COMP%]{border-style:dashed}.border--dotted[_ngcontent-%COMP%]{border-style:dotted}.border--blue[_ngcontent-%COMP%]{border-color:#5c74d7}.border--purple[_ngcontent-%COMP%]{border-color:#70b}.border--green[_ngcontent-%COMP%]{border-color:#00d36f}.border--orange[_ngcontent-%COMP%]{border-color:#ff9d2a}.border--pink[_ngcontent-%COMP%]{border-color:#ff2480}.border--white[_ngcontent-%COMP%]{border-color:#fff}.border--light-grey[_ngcontent-%COMP%]{border-color:#ccc}.border--medium-grey[_ngcontent-%COMP%]{border-color:#9e9e9e}.border--dark-grey[_ngcontent-%COMP%]{border-color:#333}"],changeDetection:0});let G=(()=>{class u{}return u.\u0275fac=function(d){return new(d||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[[a.ez,_.f.forChild({agesConfig:new Map([[0,null],[1,null],[2,null]])}),s.P.forChild(),O,i.GameStepsModule.forChild([l.N,c.Z,S])]]}),u})()},4106:(M,p,t)=>{t.d(p,{f:()=>c});var a=t(9808),_=t(933),s=t(6007),i=t(1233),l=t(5e3);let c=(()=>{class m{static forChild(e){return{ngModule:m,providers:[{provide:s.n,useValue:e.agesConfig},{provide:s.O,useValue:e.stepsToReset}]}}}return m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=l.oAB({type:m}),m.\u0275inj=l.cJS({imports:[[a.ez,i.D,_.q]]}),m})()},8450:(M,p,t)=>{t.d(p,{N:()=>y});var a=t(6849),_=t(9771);const s={0:_.r.PINK,1:_.r.ORANGE,2:_.r.GREEN},i={0:"3 - 4",1:"4 - 5",2:"5 - 6"};class l{constructor(E,r){this.id=E;const h=i[this.id];this.title=`${h} ${r[h]}`,this.color=s[this.id]}}var c=t(5713),m=t(6007),o=t(4850),e=t(5e3),O=t(2273),C=t(9808);let I=(()=>{class f{static _getStyleProp(r){return`style.${r}`}ngOnInit(){this._setDefaultColors()}onMouseEnter(){this.color=this.borderColor=_.r.WHITE,this.bgColor=this.age.color,this.boxShadow=`0 0 16px 3px ${_.r.LIGHT_GREY}`}onMouseLeave(){this._setDefaultColors()}_setDefaultColors(){this.color=this.borderColor=this.age.color,this.bgColor=_.r.WHITE,this.boxShadow="none"}}return f.\u0275fac=function(r){return new(r||f)},f.\u0275dir=e.lG2({type:f,selectors:[["","ageItemColorize",""]],hostVars:8,hostBindings:function(r,h){1&r&&e.NdJ("mouseenter",function(){return h.onMouseEnter()})("mouseleave",function(){return h.onMouseLeave()}),2&r&&e.Udp("color",h.color)("border-color",h.borderColor)("background-color",h.bgColor)("box-shadow",h.boxShadow)},inputs:{age:["ageItemColorize","age"]}}),f})();var A=t(829);function T(f,E){if(1&f){const r=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(){const g=e.CHM(r).$implicit;return e.oxw(2).chooseAge(g)}),e._uU(1),e.qZA()}if(2&f){const r=E.$implicit;e.Q6J("ageItemColorize",r),e.xp6(1),e.hij(" ",r.title," ")}}function D(f,E){if(1&f&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e._uU(2),e.ALo(3,"capitalizeFirstLetter"),e.qZA(),e.YNc(4,T,2,2,"div",3),e.qZA()),2&f){const r=E.ngIf;e.xp6(2),e.hij("",e.lcZ(3,2,r.title),"?"),e.xp6(2),e.Q6J("ngForOf",r.ages)}}let y=(()=>{class f{constructor(r,h,v){this._agesConfig=r,this._stepsToReset=h,this._translationsService=v,this.content$=this._translationsService.loadTranslation("ages").pipe((0,o.U)(g=>({title:g.title,ages:Array.from(this._agesConfig.keys()).map(R=>new l(R,g))})))}ngOnInit(){c.k.setAgesConfig(this._agesConfig),this._stepsToReset&&a.A.resetSteps(this._stepsToReset)}chooseAge(r){c.k.setAgeId(r.id),a.A.updateStepInfo({title:r.title,style:{color:r.color}}),a.A.goToNext()}}return f.\u0275fac=function(r){return new(r||f)(e.Y36(m.n),e.Y36(m.O),e.Y36(O.f))},f.\u0275cmp=e.Xpm({type:f,selectors:[["age-choice"]],decls:2,vars:3,consts:[["class","ages-choice",4,"ngIf"],[1,"ages-choice"],[1,"ages-choice__title"],["class","ages-choice__age",3,"ageItemColorize","click",4,"ngFor","ngForOf"],[1,"ages-choice__age",3,"ageItemColorize","click"]],template:function(r,h){1&r&&(e.YNc(0,D,5,4,"div",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,h.content$))},directives:[C.O5,C.sg,I],pipes:[C.Ov,A.G],styles:[".ages-choice__title[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;font-size:3rem;color:#70b}.ages-choice__age[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:2rem auto;padding:.5rem;text-align:center;font-size:2rem;font-weight:bolder;border:2px solid;border-radius:50%;cursor:pointer}"],changeDetection:0}),f})()},6007:(M,p,t)=>{t.d(p,{n:()=>_,O:()=>s});var a=t(5e3);const _=new a.OlP("AGES_CONFIG_TOKEN"),s=new a.OlP("STEPS_TO_RESET_TOKEN")},9254:(M,p,t)=>{t.d(p,{d:()=>m});var a=t(9808),_=t(2188),s=t(4729),i=t(8889),l=t(1834),c=t(5e3);let m=(()=>{class o extends i.l{constructor(O,C,I,A){super(I,A),this._elementRef=O,this._renderer=C,this.rowsAmount=1,this.columnsAmount=1,this.itemSize=300,this.coeff=1}ngOnInit(){super.ngOnInit(),this._renderer.setStyle(this._elementRef.nativeElement,_.L.DISPLAY,"grid"),this._renderer.setStyle(this._elementRef.nativeElement,_.L.GRID_GAP,`0.5${l.N.REM}`),this._renderer.setStyle(this._elementRef.nativeElement,_.L.JUSTIFY_CONTENT,"center")}setGameSizes(){const O=Math.min(this.itemSize,s.B.getGridContainerMinDimension()/Math.max(this.rowsAmount,this.columnsAmount)-12);this._renderer.setStyle(this._elementRef.nativeElement,_.L.GRID_TEMPLATE_COLUMNS,`repeat(${this.columnsAmount}, ${O}${l.N.PX})`),this._renderer.setStyle(this._elementRef.nativeElement,_.L.GRID_TEMPLATE_ROWS,`repeat(${this.rowsAmount}, ${O*this.coeff}${l.N.PX})`)}}return o.\u0275fac=function(O){return new(O||o)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.R0b),c.Y36(a.K0))},o.\u0275dir=c.lG2({type:o,selectors:[["","gridSizer",""]],inputs:{rowsAmount:"rowsAmount",columnsAmount:"columnsAmount",itemSize:"itemSize",coeff:"coeff"},features:[c.qOj]}),o})()},9513:(M,p,t)=>{t.d(p,{n:()=>m});var c,a=t(655),_=t(8744),s=t(2986),i=t(2868),l=t(5e3);class m{constructor(e,O){this._elementRef=e,this._renderer=O,c.set(this,null)}ngOnInit(){if("IMG"!==this._elementRef.nativeElement.tagName)throw new Error("Element should be an image");(0,a.YH)(this,c,_.O.getImage(this.src).pipe((0,s.q)(1),(0,i.b)(e=>this._renderer.setAttribute(this._elementRef.nativeElement,"src",e.src))).subscribe(),"f")}ngOnDestroy(){var e;null===(e=(0,a.Q_)(this,c,"f"))||void 0===e||e.unsubscribe()}}c=new WeakMap,m.\u0275fac=function(e){return new(e||m)(l.Y36(l.SBq),l.Y36(l.Qsj))},m.\u0275dir=l.lG2({type:m,selectors:[["","preloadImg",""]],inputs:{src:["preloadImg","src"]}})},9117:(M,p,t)=>{t.d(p,{W:()=>_});var a=t(2273);class _{constructor(i){this.id=null,this.title="",this.color="",this.route="",this.id=i.id,this.title=a.f.getTranslation(i.id),this.color=i.color,this.route=`${this.id}`}}},5605:(M,p,t)=>{t.d(p,{$:()=>a});class a{static shuffle(s){if(s.length<1)return console.warn("Empty array!"),s;const i=[...s];for(;!a._isArrShuffled(s,i);)i.sort(()=>Math.random()-.5);return i}static _isArrShuffled(s,i){let l=!1;for(const[c,m]of s.entries())if(m!==i[c]){l=!0;break}return l}static getRandItems(s,i=s.length){if(i>s.length)throw new Error(`maxArrLength ${i} should be equal or less than items length ${s.length}`);const l=a.shuffle(s);return l.length=i,l}static getDoubledRandItems(s,i=s.length){const l=a.getRandItems(s,i);return a.shuffle([...l,...l])}static uniq(s){return Array.from(new Set(s))}static getSequence(s,i=0){const l=[];for(let c=i;c<s;c++)l.push(c);return l}static groupArrByLength(s,i){const l=new Map;let c=0,m=0,o=0;for(;o<s.length;)m=c*i,o=m+i,l.set(c,s.slice(m,o)),c++;return l}static getRndInteger(s,i){return Math.floor(Math.random()*(i-s))+s}static getRndArrElem(s){return s[a.getRndInteger(0,s.length)]}}},4636:(M,p,t)=>{t.d(p,{Z:()=>E});var a=t(9424),_=t(4375),s=t(9771),i=t(6849),l=t(8397),c=t(2868),m=t(2273),o=t(5e3),e=t(2205),O=t(5316),C=t(5610),I=t(965),A=t(9808),T=t(9513),D=t(8550),y=t(829);function f(r,h){if(1&r){const v=o.EpF();o.TgZ(0,"figure",5),o.NdJ("click",function(R){const B=o.CHM(v).$implicit;return o.oxw().selectIcon(R,B)}),o._UZ(1,"img",6),o.TgZ(2,"figcaption"),o.TgZ(3,"div",7),o._uU(4),o.ALo(5,"capitalizeFirstLetter"),o.qZA(),o.qZA(),o.qZA()}if(2&r){const v=h.$implicit;o.xp6(1),o.Q6J("preloadImg",v.icon),o.xp6(3),o.Oqu(o.lcZ(5,2,v.title))}}let E=(()=>{class r extends _.Q{constructor(v,g){super(g),this._themesService=v,this.cdRef=g,this.category=a.G.getCategoryById("themes"),this.title=m.f.getTranslation("choose_theme"),this.searchPlaceHolder=`${m.f.getTranslation("search_theme")}...`,this.list$=null}selectIcon(v,g){v.stopPropagation(),l.J.setChosenTheme(g),i.A.updateStepInfo({title:g.title,style:{color:s.r.BLUE}}),i.A.goToNext()}buildList(){this.list$=this._themesService.getThemes().pipe((0,c.b)(()=>this.showList()))}}return r.\u0275fac=function(v){return new(v||r)(o.Y36(e.O),o.Y36(o.sBO))},r.\u0275cmp=o.Xpm({type:r,selectors:[["theme-choice"]],features:[o.qOj],decls:7,vars:10,consts:[[3,"category","title"],[3,"placeHolder","searchStrInput"],[3,"loaded"],[1,"list"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"list-item__img",3,"preloadImg"],[1,"list-item__title"]],template:function(v,g){1&v&&(o._UZ(0,"category-title",0),o.TgZ(1,"search-input",1),o.NdJ("searchStrInput",function(L){return g.searchStr=L}),o.qZA(),o.TgZ(2,"spinner-wrapper",2),o.TgZ(3,"div",3),o.YNc(4,f,6,4,"figure",4),o.ALo(5,"filterIcons"),o.ALo(6,"async"),o.qZA(),o.qZA()),2&v&&(o.Q6J("category",g.category)("title",g.title),o.xp6(1),o.Q6J("placeHolder",g.searchPlaceHolder),o.xp6(1),o.Q6J("loaded",g.loaded),o.xp6(2),o.Q6J("ngForOf",o.xi3(5,5,o.lcZ(6,8,g.list$),g.searchStr)))},directives:[O.a,C.J,I.C,A.sg,T.n],pipes:[D.V,A.Ov,y.G],styles:[".list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:3rem}.list-item[_ngcontent-%COMP%]{padding:10px;border-radius:30px 0;box-shadow:0 0 10px 18px #ffffffbf;background-color:#ffffffbf;border:solid 2px rgba(158,158,158,.15);cursor:pointer}.list-item[_ngcontent-%COMP%]:hover{background-color:#ffffffe6;border-color:#9e9e9e4d}.list-item__img[_ngcontent-%COMP%]{display:block;margin:auto}.list-item__title[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}"],changeDetection:0}),r})()}}]);