"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[477],{477:(rt,T,s)=>{s.r(T),s.d(T,{GameStepsComponent:()=>at});var y=s(101),G=s(2346),v=s(3889),c=s(8916),f=s(2793),r=s(6895),t=s(4650),B=s(1739),O=s(9771),S=s(4729),_=s(9417),A=s(7579),u=s(8505),h=s(2722),P=s(6871),C=s(6849),I=s(8397);let J=(()=>{class e{constructor(n){this._location=n}closeGame(){this._location.back(),I.J.unsetTheme()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["close-game"]],standalone:!0,features:[t._Bn([r.Ye,{provide:r.S$,useClass:r.b0}]),t.jDz],decls:1,vars:0,consts:[[1,"cross","smooth-bg",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return i.closeGame()}),t.qZA())},styles:['.cross[_ngcontent-%COMP%]{width:50px;height:50px;position:relative;cursor:pointer}.cross[_ngcontent-%COMP%]:before{content:"";width:100%;height:20%;background-color:#ff2480;position:absolute;top:20px;transform:rotate(45deg)}.cross[_ngcontent-%COMP%]:after{content:"";width:100%;height:20%;background-color:#ff2480;position:absolute;top:20px;transform:rotate(-45deg)}'],changeDetection:0}),e})();var F=s(5861),N=s(7926),w=s(4128),z=s(4004),R=s(2273);let k=(()=>{class e{constructor(n){this._translationsService=n,this.message$=null,this.colors=O.r}ngOnInit(){this.message$=(0,w.D)({img:N.O.getImage(this.imgSrc),translation:this._translationsService.loadTranslation("game_finished")}).pipe((0,z.U)(n=>(this.playSound(),n.translation[this.translationProp])))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(R.f))},e.\u0275dir=t.lG2({type:e}),e})();var M=s(1995),x=s(829);function Y(e,o){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"img",2),t.TgZ(2,"div",3),t._uU(3),t.ALo(4,"capitalizeFirstLetter"),t.qZA()()),2&e){const n=o.ngIf,i=t.oxw();t.xp6(1),t.Q6J("src",i.imgSrc,t.LSH),t.xp6(1),t.Udp("color",i.colors.ORANGE),t.xp6(1),t.hij(" ",t.lcZ(4,4,n)," ")}}let $=(()=>{class e extends k{constructor(){super(...arguments),this.imgSrc=`../../../../../assets/img/game-completed.${M.D.SVG}`,this.translationProp="win"}playSound(){return(0,F.Z)(function*(){yield _.d.playWinSound()})()}}return e.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(e)))(i||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["game-completed"]],standalone:!0,features:[t.qOj,t.jDz],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"w--100",3,"src"],[1,"container__text"]],template:function(n,i){1&n&&(t.YNc(0,Y,5,6,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.message$))},dependencies:[r.O5,r.Ov,x.G],styles:[".container[_ngcontent-%COMP%]{display:grid;max-width:400px;width:100%;height:100%;margin:auto;place-items:center}.container__text[_ngcontent-%COMP%]{margin-top:1rem;font-size:3rem;text-align:center}"],changeDetection:0}),e})();function Q(e,o){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"img",2),t.TgZ(2,"div",3),t._uU(3),t.ALo(4,"capitalizeFirstLetter"),t.qZA()()),2&e){const n=o.ngIf,i=t.oxw();t.xp6(1),t.Q6J("src",i.imgSrc,t.LSH),t.xp6(1),t.Udp("color",i.colors.ORANGE),t.xp6(1),t.hij(" ",t.lcZ(4,4,n)," ")}}let D=(()=>{class e extends k{constructor(){super(...arguments),this.imgSrc=`../../../../../assets/img/game-failed.${M.D.PNG}`,this.translationProp="fail"}playSound(){return(0,F.Z)(function*(){yield _.d.playGameFailedSound()})()}}return e.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(e)))(i||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["game-failed"]],standalone:!0,features:[t.qOj,t.jDz],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"w--100",3,"src"],[1,"container__text"]],template:function(n,i){1&n&&(t.YNc(0,Q,5,6,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.message$))},dependencies:[r.O5,r.Ov,x.G],styles:[".container[_ngcontent-%COMP%]{display:grid;max-width:400px;width:100%;height:100%;margin:auto;place-items:center}.container__text[_ngcontent-%COMP%]{margin-top:1rem;font-size:3rem;text-align:center}"],changeDetection:0}),e})(),j=(()=>{class e{constructor(){this.stepBack=new t.vpe}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["step-back"]],outputs:{stepBack:"stepBack"},standalone:!0,features:[t.jDz],decls:3,vars:0,consts:[[1,"step-back","smooth-bg",3,"click"],[1,"step-back__triangle"],[1,"step-back__stick"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return i.stepBack.emit()}),t._UZ(1,"div",1)(2,"div",2),t.qZA())},styles:[".step-back[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer}.step-back__stick[_ngcontent-%COMP%]{width:50px;height:12px;position:relative;background-color:#00d36f}.step-back__triangle[_ngcontent-%COMP%]{width:0;height:0;border-style:solid;border-width:20px 25px 20px 0;border-color:transparent #00d36f transparent transparent}"],changeDetection:0}),e})();var U=s(500),H=s(4774);const L=["contentContainer"],E=["content"],W=["header"],K=["closeGame"],X=["menuToggle"];function V(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"step-back",11),t.NdJ("stepBack",function(){t.CHM(n);const p=t.oxw();return t.KtG(p.stepBack())}),t.qZA()}}function q(e,o){1&e&&t.GkF(0)}const b=function(e){return{$implicit:e}};function tt(e,o){if(1&e&&(t.TgZ(0,"div",12),t.YNc(1,q,1,0,"ng-container",13),t.qZA()),2&e){const n=t.oxw(),i=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,b,n.gameStepsInfo))}}function et(e,o){1&e&&t.GkF(0)}function nt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"menu-toggle",14,15),t.YNc(2,et,1,0,"ng-container",13),t.TgZ(3,"step-back",11),t.NdJ("stepBack",function(){t.CHM(n);const p=t.oxw();return t.KtG(p.stepBack())}),t.qZA()()}if(2&e){const n=t.oxw(),i=t.MAs(9);t.Q6J("appearanceFrom",n.menuAppearanceFrom),t.xp6(2),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(3,b,n.gameStepsInfo))}}function ot(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(n);const p=t.oxw().index,g=t.oxw(2);return t.KtG(g.goToStep(p))}),t._uU(1),t.ALo(2,"capitalizeFirstLetter"),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.Q6J("ngStyle",n.style),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.title)," ")}}function st(e,o){if(1&e&&(t.ynx(0),t.YNc(1,ot,3,4,"div",17),t.BQk()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("ngIf",n)}}function it(e,o){1&e&&t.YNc(0,st,2,1,"ng-container",16),2&e&&t.Q6J("ngForOf",o.$implicit)}let at=(()=>{var e=new WeakMap,o=new WeakMap,n=new WeakMap,i=new WeakSet,p=new WeakSet;class g{constructor(a,m,l){(0,y.Z)(this,p),(0,y.Z)(this,i),(0,G.Z)(this,e,{writable:!0,value:void 0}),(0,G.Z)(this,o,{writable:!0,value:void 0}),(0,G.Z)(this,n,{writable:!0,value:void 0}),this._router=a,this._cdRef=m,this._stepsConfig=l,this.gameStepsInfo=[],this.colors=O.r,this.menuAppearanceFrom="left",(0,f.Z)(this,o,0),(0,f.Z)(this,n,new A.x)}ngOnInit(){if(!this._stepsConfig||!this._stepsConfig.length)throw new Error("No steps!!!");S.B.chosenGameId||(S.B.chosenGameId=this._router.routerState.snapshot.url.split("/").pop()),C.A.goToNext$.pipe((0,u.b)(()=>{var a;return this.goToStep((0,f.Z)(this,o,(a=(0,c.Z)(this,o),++a)))}),(0,h.R)((0,c.Z)(this,n))).subscribe(),C.A.updateStepInfo$.pipe((0,u.b)(a=>{this.gameStepsInfo[(0,c.Z)(this,o)]=a,this._cdRef.detectChanges()}),(0,h.R)((0,c.Z)(this,n))).subscribe(),C.A.gameCompleted$.pipe((0,u.b)(()=>(0,v.Z)(this,p,Z).call(this,$)),(0,h.R)((0,c.Z)(this,n))).subscribe(),C.A.gameFailed$.pipe((0,u.b)(()=>(0,v.Z)(this,p,Z).call(this,D)),(0,h.R)((0,c.Z)(this,n))).subscribe(),C.A.stepsToReset$.pipe((0,u.b)(a=>(0,v.Z)(this,i,ct).call(this,a)),(0,h.R)((0,c.Z)(this,n))).subscribe(),this.goToStep((0,c.Z)(this,o))}ngAfterViewInit(){S.B.gameOffsetTop=this.contentContainer.nativeElement.getBoundingClientRect().top}ngOnDestroy(){_.d.stopSound(),(0,c.Z)(this,n).next(),(0,c.Z)(this,n).unsubscribe(),(0,c.Z)(this,e).destroy()}stepBack(){var a;(0,c.Z)(this,o)>0?(this.gameStepsInfo[(0,f.Z)(this,o,(a=(0,c.Z)(this,o),--a))]||this.stepBack(),this.goToStep((0,c.Z)(this,o))):this.closeGameComponent.closeGame()}goToStep(a){(0,f.Z)(this,o,a),(0,v.Z)(this,p,Z).call(this,this._stepsConfig[(0,c.Z)(this,o)]),this.menuToggle?.closeMenu()}}function ct(d){d.forEach(a=>{null!==this.gameStepsInfo[a]&&(this.gameStepsInfo[a]=null)}),this._cdRef.detectChanges()}function Z(d){_.d.stopSound(),this.content.clear(),(0,f.Z)(this,e,this.content.createComponent(d)),this._cdRef.detectChanges()}return g.\u0275fac=function(a){return new(a||g)(t.Y36(H.F0),t.Y36(t.sBO),t.Y36(P.s))},g.\u0275cmp=t.Xpm({type:g,selectors:[["game-steps"]],viewQuery:function(a,m){if(1&a&&(t.Gf(L,7),t.Gf(E,7,t.s_b),t.Gf(W,7),t.Gf(K,7),t.Gf(X,5)),2&a){let l;t.iGM(l=t.CRH())&&(m.contentContainer=l.first),t.iGM(l=t.CRH())&&(m.content=l.first),t.iGM(l=t.CRH())&&(m.headerEl=l.first),t.iGM(l=t.CRH())&&(m.closeGameComponent=l.first),t.iGM(l=t.CRH())&&(m.menuToggle=l.first)}},standalone:!0,features:[t.jDz],decls:14,vars:3,consts:[[1,"steps"],[1,"header"],["header",""],[3,"stepBack",4,"ifMobile"],["class","game-info",4,"ifMobile"],[3,"appearanceFrom",4,"ifMobile"],[1,"close-game"],["closeGame",""],["gameStepsInfoTmpl",""],["contentContainer",""],["content",""],[3,"stepBack"],[1,"game-info"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"appearanceFrom"],["menuToggle",""],[4,"ngFor","ngForOf"],["class","game-info__step smooth-bg",3,"ngStyle","click",4,"ngIf"],[1,"game-info__step","smooth-bg",3,"ngStyle","click"]],template:function(a,m){1&a&&(t.TgZ(0,"div",0)(1,"div",1,2),t.YNc(3,V,1,0,"step-back",3),t.YNc(4,tt,2,4,"div",4),t.YNc(5,nt,4,5,"menu-toggle",5),t._UZ(6,"close-game",6,7),t.qZA(),t.YNc(8,it,1,1,"ng-template",null,8,t.W1O),t.TgZ(10,"div",null,9),t._UZ(12,"template",null,10),t.qZA()()),2&a&&(t.xp6(3),t.Q6J("ifMobile",!1),t.xp6(1),t.Q6J("ifMobile",!1),t.xp6(1),t.Q6J("ifMobile",!0))},dependencies:[r.ez,r.sg,r.O5,r.tP,r.PC,x.G,J,j,B.d,U.u],styles:[".steps[_ngcontent-%COMP%]{display:grid;height:100%;grid-template-rows:min-content 1fr}.header[_ngcontent-%COMP%]{display:grid;grid-template-columns:min-content auto min-content;place-items:center;margin-bottom:1rem;position:sticky;top:.5rem;z-index:1}.game-info[_ngcontent-%COMP%]{display:grid;place-items:center;grid-auto-flow:column;grid-gap:2rem}.game-info__step[_ngcontent-%COMP%]{font-size:2rem;cursor:pointer;text-align:center}.game-info__step[_ngcontent-%COMP%]:hover{text-decoration:underline}@media screen and (max-width: 1024px){.close-game[_ngcontent-%COMP%]{grid-column-start:3}}"],changeDetection:0}),g})()}}]);