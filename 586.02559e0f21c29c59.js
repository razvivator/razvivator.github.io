"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[586],{6330:(A,g,e)=>{e.d(g,{a:()=>h});var a=e(9771);const h=[{id:"themes",color:a.r.BLUE},{id:"memory",color:a.r.GREEN},{id:"attention",color:a.r.ORANGE},{id:"intellect",color:a.r.PINK}]},5791:(A,g,e)=>{e.r(g),e.d(g,{FindThePairConfigModule:()=>H});var a=e(9808),h=e(7072),o=e(4106),d=e(8450),_=e(395),c=e(4636),s=e(5562),n=e(3162),t=e(655),p=e(8929),P=e(567),T=e(2868),M=e(1709),x=e(2198),D=e(7625),S=e(1692),m=e(5713),O=e(6849),l=e(5605),E=e(9417),v=e(2281);const C="card--rotated";var L,i=e(5e3),K=e(4853),G=e(9254);const N=["card"];class B{constructor(r){this._renderer=r,this.cardRotate=new i.vpe,this.transitionEnd=new i.vpe,L.set(this,!1)}isOpen(){return(0,t.Q_)(this,L,"f")}rotateForward(){(0,t.YH)(this,L,!0,"f"),this._renderer.addClass(this.cardVCh.nativeElement,C)}rotateBack(){(0,t.YH)(this,L,!1,"f"),this._renderer.removeClass(this.cardVCh.nativeElement,C)}onCardClick(){(0,t.Q_)(this,L,"f")||this.cardRotate.emit(this)}onTransitionEnd(){this.transitionEnd.emit(this)}}var W,z,R,U,b;function Q(u,r){if(1&u){const f=i.EpF();i.TgZ(0,"card",3),i.NdJ("cardRotate",function(Z){return i.CHM(f),i.oxw().card$.next(Z)})("transitionEnd",function(Z){return i.CHM(f),i.oxw().onCardTransitionEnd(Z)}),i.qZA()}2&u&&i.Q6J("item",r.$implicit)}L=new WeakMap,B.\u0275fac=function(r){return new(r||B)(i.Y36(i.Qsj))},B.\u0275cmp=i.Xpm({type:B,selectors:[["card"]],viewQuery:function(r,f){if(1&r&&i.Gf(N,7),2&r){let y;i.iGM(y=i.CRH())&&(f.cardVCh=y.first)}},inputs:{item:"item"},outputs:{cardRotate:"cardRotate",transitionEnd:"transitionEnd"},decls:7,vars:1,consts:[[1,"card-container",3,"click"],[1,"card",3,"transitionend"],["card",""],[1,"card__front"],[1,"card__back","radial-gradient--medium-grey"],[1,"card__img",3,"src"]],template:function(r,f){1&r&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return f.onCardClick()}),i.TgZ(1,"div",1,2),i.NdJ("transitionend",function(){return f.onTransitionEnd()}),i.TgZ(3,"div",3),i._uU(4,"?"),i.qZA(),i.TgZ(5,"div",4),i._UZ(6,"img",5),i.qZA(),i.qZA(),i.qZA()),2&r&&(i.xp6(6),i.Q6J("src",f.item.img,i.LSH))},styles:[".radial-gradient--soft-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#f0f0f0)}.radial-gradient--medium-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#dbdbdb)}[_nghost-%COMP%]{width:100%;height:100%}.card[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform 1s;transform-style:preserve-3d}.card-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:auto;perspective:1000px}.card--rotated[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card__front[_ngcontent-%COMP%], .card__back[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center;position:absolute;-webkit-backface-visibility:hidden;backface-visibility:hidden;border-radius:8px}.card__front[_ngcontent-%COMP%]{background:radial-gradient(#7085dc,#5c74d7);color:#fff;font-family:Helvetica,sans-serif;font-size:4rem;cursor:pointer}.card__back[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card__img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}"],changeDetection:0});class F{constructor(r){this._themeItemsService=r,this.gameLoader=null,this.items=null,this.card$=new p.xQ,this.rowsAmount=m.k.getAgesConfig().totalCards/2,W.set(this,new p.xQ),z.set(this,new p.xQ),R.set(this,new p.xQ),U.set(this,0),b.set(this,0)}ngOnInit(){this._buildGame()}ngOnDestroy(){(0,t.Q_)(this,R,"f").next(),(0,t.Q_)(this,R,"f").unsubscribe()}onCardTransitionEnd(r){r.isOpen()?(0,t.Q_)(this,W,"f").next(r):(0,t.Q_)(this,z,"f").next(r)}_buildGame(){this.gameLoader=this._themeItemsService.getItems().pipe((0,T.b)(r=>{this.items=l.$.getDoubledRandItems(r,m.k.getAgesConfig().totalCards),(0,t.YH)(this,b,0,"f"),this._resetOpenCardsAmount(),this._setSubscriptions()}),(0,M.zg)(()=>(0,P.D)([v.r.preloadThemeItemsImgs(this.items),E.d.preloadThemeItemsTitleSounds(this.items)])))}_checkConsilience(r){return(0,t.mG)(this,void 0,void 0,function*(){r[0].item.img===r[1].item.img?(this._resetOpenCardsAmount(),yield r[0].item.playTitle(),setTimeout(()=>{var f;(0,t.YH)(this,b,(f=(0,t.Q_)(this,b,"f"),++f),"f")===m.k.getAgesConfig().totalCards&&O.A.gameCompleted()},100)):setTimeout(()=>{r.forEach(f=>f.rotateBack())},m.k.getAgesConfig().openCardsShowTime)})}_resetOpenCardsAmount(){(0,t.YH)(this,U,0,"f")}_setSubscriptions(){this.card$.pipe((0,x.h)(()=>{var r;return(0,t.YH)(this,U,(r=(0,t.Q_)(this,U,"f"),++r),"f")<=2}),(0,T.b)(r=>r.rotateForward()),(0,D.R)((0,t.Q_)(this,R,"f"))).subscribe(),(0,t.Q_)(this,W,"f").pipe((0,S.j)(2),(0,T.b)(r=>this._checkConsilience(r)),(0,D.R)((0,t.Q_)(this,R,"f"))).subscribe(),(0,t.Q_)(this,z,"f").pipe((0,S.j)(2),(0,T.b)(()=>this._resetOpenCardsAmount()),(0,D.R)((0,t.Q_)(this,R,"f"))).subscribe()}}W=new WeakMap,z=new WeakMap,R=new WeakMap,U=new WeakMap,b=new WeakMap,F.\u0275fac=function(r){return new(r||F)(i.Y36(v.r))},F.\u0275cmp=i.Xpm({type:F,selectors:[["find-the-pair"]],decls:3,vars:3,consts:[[3,"gameLoader"],["gridSizer","","columnsAmount","4",3,"rowsAmount"],[3,"item","cardRotate","transitionEnd",4,"ngFor","ngForOf"],[3,"item","cardRotate","transitionEnd"]],template:function(r,f){1&r&&(i.TgZ(0,"game-spinner-wrapper",0),i.TgZ(1,"div",1),i.YNc(2,Q,1,1,"card",2),i.qZA(),i.qZA()),2&r&&(i.Q6J("gameLoader",f.gameLoader),i.xp6(1),i.s9C("rowsAmount",f.rowsAmount),i.xp6(1),i.Q6J("ngForOf",f.items))},directives:[K.Z,G.d,a.sg,B],encapsulation:2,changeDetection:0});var $=e(933),Y=e(2747);let J=(()=>{class u{}return u.\u0275fac=function(f){return new(f||u)},u.\u0275mod=i.oAB({type:u}),u.\u0275inj=i.cJS({imports:[[a.ez,$.q,Y.U]]}),u})(),H=(()=>{class u{}return u.\u0275fac=function(f){return new(f||u)},u.\u0275mod=i.oAB({type:u}),u.\u0275inj=i.cJS({imports:[[a.ez,_.GameStepsModule.forChild([d.N,c.Z,F]),o.f.forChild({agesConfig:new Map([[0,{totalCards:4,openCardsShowTime:2e3}],[1,{totalCards:6,openCardsShowTime:1500}],[2,{totalCards:8,openCardsShowTime:1e3}]])}),s.P.forChild(),J,h.Bz.forChild(n.M)]]}),u})()},4106:(A,g,e)=>{e.d(g,{f:()=>c});var a=e(9808),h=e(933),o=e(6007),d=e(1233),_=e(5e3);let c=(()=>{class s{static forChild(t){return{ngModule:s,providers:[{provide:o.n,useValue:t.agesConfig},{provide:o.O,useValue:t.stepsToReset}]}}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=_.oAB({type:s}),s.\u0275inj=_.cJS({imports:[[a.ez,d.D,h.q]]}),s})()},8450:(A,g,e)=>{e.d(g,{N:()=>S});var a=e(6849),h=e(9771);const o={0:h.r.PINK,1:h.r.ORANGE,2:h.r.GREEN},d={0:"3 - 4",1:"4 - 5",2:"5 - 6"};class _{constructor(O,l){this.id=O;const E=d[this.id];this.title=`${E} ${l[E]}`,this.color=o[this.id]}}var c=e(5713),s=e(6007),n=e(4850),t=e(5e3),p=e(2273),P=e(9808);let T=(()=>{class m{static _getStyleProp(l){return`style.${l}`}ngOnInit(){this._setDefaultColors()}onMouseEnter(){this.color=this.borderColor=h.r.WHITE,this.bgColor=this.age.color,this.boxShadow=`0 0 16px 3px ${h.r.LIGHT_GREY}`}onMouseLeave(){this._setDefaultColors()}_setDefaultColors(){this.color=this.borderColor=this.age.color,this.bgColor=h.r.WHITE,this.boxShadow="none"}}return m.\u0275fac=function(l){return new(l||m)},m.\u0275dir=t.lG2({type:m,selectors:[["","ageItemColorize",""]],hostVars:8,hostBindings:function(l,E){1&l&&t.NdJ("mouseenter",function(){return E.onMouseEnter()})("mouseleave",function(){return E.onMouseLeave()}),2&l&&t.Udp("color",E.color)("border-color",E.borderColor)("background-color",E.bgColor)("box-shadow",E.boxShadow)},inputs:{age:["ageItemColorize","age"]}}),m})();var M=e(829);function x(m,O){if(1&m){const l=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(){const C=t.CHM(l).$implicit;return t.oxw(2).chooseAge(C)}),t._uU(1),t.qZA()}if(2&m){const l=O.$implicit;t.Q6J("ageItemColorize",l),t.xp6(1),t.hij(" ",l.title," ")}}function D(m,O){if(1&m&&(t.TgZ(0,"div",1),t.TgZ(1,"div",2),t._uU(2),t.ALo(3,"capitalizeFirstLetter"),t.qZA(),t.YNc(4,x,2,2,"div",3),t.qZA()),2&m){const l=O.ngIf;t.xp6(2),t.hij("",t.lcZ(3,2,l.title),"?"),t.xp6(2),t.Q6J("ngForOf",l.ages)}}let S=(()=>{class m{constructor(l,E,v){this._agesConfig=l,this._stepsToReset=E,this._translationsService=v,this.content$=this._translationsService.loadTranslation("ages").pipe((0,n.U)(C=>({title:C.title,ages:Array.from(this._agesConfig.keys()).map(I=>new _(I,C))})))}ngOnInit(){c.k.setAgesConfig(this._agesConfig),this._stepsToReset&&a.A.resetSteps(this._stepsToReset)}chooseAge(l){c.k.setAgeId(l.id),a.A.updateStepInfo({title:l.title,style:{color:l.color}}),a.A.goToNext()}}return m.\u0275fac=function(l){return new(l||m)(t.Y36(s.n),t.Y36(s.O),t.Y36(p.f))},m.\u0275cmp=t.Xpm({type:m,selectors:[["age-choice"]],decls:2,vars:3,consts:[["class","ages-choice",4,"ngIf"],[1,"ages-choice"],[1,"ages-choice__title"],["class","ages-choice__age",3,"ageItemColorize","click",4,"ngFor","ngForOf"],[1,"ages-choice__age",3,"ageItemColorize","click"]],template:function(l,E){1&l&&(t.YNc(0,D,5,4,"div",0),t.ALo(1,"async")),2&l&&t.Q6J("ngIf",t.lcZ(1,1,E.content$))},directives:[P.O5,P.sg,T],pipes:[P.Ov,M.G],styles:[".ages-choice__title[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;font-size:3rem;color:#70b}.ages-choice__age[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:2rem auto;padding:.5rem;text-align:center;font-size:2rem;font-weight:bolder;border:2px solid;border-radius:50%;cursor:pointer}"],changeDetection:0}),m})()},6007:(A,g,e)=>{e.d(g,{n:()=>h,O:()=>o});var a=e(5e3);const h=new a.OlP("AGES_CONFIG_TOKEN"),o=new a.OlP("STEPS_TO_RESET_TOKEN")},9254:(A,g,e)=>{e.d(g,{d:()=>s});var a=e(9808),h=e(2188),o=e(4729),d=e(8889),_=e(1834),c=e(5e3);let s=(()=>{class n extends d.l{constructor(p,P,T,M){super(T,M),this._elementRef=p,this._renderer=P,this.rowsAmount=1,this.columnsAmount=1,this.itemSize=300,this.coeff=1}ngOnInit(){super.ngOnInit(),this._renderer.setStyle(this._elementRef.nativeElement,h.L.DISPLAY,"grid"),this._renderer.setStyle(this._elementRef.nativeElement,h.L.GRID_GAP,`0.5${_.N.REM}`),this._renderer.setStyle(this._elementRef.nativeElement,h.L.JUSTIFY_CONTENT,"center")}setGameSizes(){const p=Math.min(this.itemSize,o.B.getGridContainerMinDimension()/Math.max(this.rowsAmount,this.columnsAmount)-12);this._renderer.setStyle(this._elementRef.nativeElement,h.L.GRID_TEMPLATE_COLUMNS,`repeat(${this.columnsAmount}, ${p}${_.N.PX})`),this._renderer.setStyle(this._elementRef.nativeElement,h.L.GRID_TEMPLATE_ROWS,`repeat(${this.rowsAmount}, ${p*this.coeff}${_.N.PX})`)}}return n.\u0275fac=function(p){return new(p||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.R0b),c.Y36(a.K0))},n.\u0275dir=c.lG2({type:n,selectors:[["","gridSizer",""]],inputs:{rowsAmount:"rowsAmount",columnsAmount:"columnsAmount",itemSize:"itemSize",coeff:"coeff"},features:[c.qOj]}),n})()},9513:(A,g,e)=>{e.d(g,{n:()=>s});var c,a=e(655),h=e(8744),o=e(2986),d=e(2868),_=e(5e3);class s{constructor(t,p){this._elementRef=t,this._renderer=p,c.set(this,null)}ngOnInit(){if("IMG"!==this._elementRef.nativeElement.tagName)throw new Error("Element should be an image");(0,a.YH)(this,c,h.O.getImage(this.src).pipe((0,o.q)(1),(0,d.b)(t=>this._renderer.setAttribute(this._elementRef.nativeElement,"src",t.src))).subscribe(),"f")}ngOnDestroy(){var t;null===(t=(0,a.Q_)(this,c,"f"))||void 0===t||t.unsubscribe()}}c=new WeakMap,s.\u0275fac=function(t){return new(t||s)(_.Y36(_.SBq),_.Y36(_.Qsj))},s.\u0275dir=_.lG2({type:s,selectors:[["","preloadImg",""]],inputs:{src:["preloadImg","src"]}})},3162:(A,g,e)=>{e.d(g,{M:()=>a});const a=[{path:"",loadChildren:()=>Promise.resolve().then(e.bind(e,395)).then(h=>h.GameStepsModule)}]},9117:(A,g,e)=>{e.d(g,{W:()=>h});var a=e(2273);class h{constructor(d){this.id=null,this.title="",this.color="",this.route="",this.id=d.id,this.title=a.f.getTranslation(d.id),this.color=d.color,this.route=`${this.id}`}}},5605:(A,g,e)=>{e.d(g,{$:()=>a});class a{static shuffle(o){if(o.length<1)return console.warn("Empty array!"),o;const d=[...o];for(;!a._isArrShuffled(o,d);)d.sort(()=>Math.random()-.5);return d}static _isArrShuffled(o,d){let _=!1;for(const[c,s]of o.entries())if(s!==d[c]){_=!0;break}return _}static getRandItems(o,d=o.length){if(d>o.length)throw new Error(`maxArrLength ${d} should be equal or less than items length ${o.length}`);const _=a.shuffle(o);return _.length=d,_}static getDoubledRandItems(o,d=o.length){const _=a.getRandItems(o,d);return a.shuffle([..._,..._])}static uniq(o){return Array.from(new Set(o))}static getSequence(o,d=0){const _=[];for(let c=d;c<o;c++)_.push(c);return _}static groupArrByLength(o,d){const _=new Map;let c=0,s=0,n=0;for(;n<o.length;)s=c*d,n=s+d,_.set(c,o.slice(s,n)),c++;return _}static getRndInteger(o,d){return Math.floor(Math.random()*(d-o))+o}static getRndArrElem(o){return o[a.getRndInteger(0,o.length)]}}},4636:(A,g,e)=>{e.d(g,{Z:()=>O});var a=e(9424),h=e(4375),o=e(9771),d=e(6849),_=e(8397),c=e(2868),s=e(2273),n=e(5e3),t=e(2205),p=e(5316),P=e(5610),T=e(965),M=e(9808),x=e(9513),D=e(8550),S=e(829);function m(l,E){if(1&l){const v=n.EpF();n.TgZ(0,"figure",5),n.NdJ("click",function(I){const K=n.CHM(v).$implicit;return n.oxw().selectIcon(I,K)}),n._UZ(1,"img",6),n.TgZ(2,"figcaption"),n.TgZ(3,"div",7),n._uU(4),n.ALo(5,"capitalizeFirstLetter"),n.qZA(),n.qZA(),n.qZA()}if(2&l){const v=E.$implicit;n.xp6(1),n.Q6J("preloadImg",v.icon),n.xp6(3),n.Oqu(n.lcZ(5,2,v.title))}}let O=(()=>{class l extends h.Q{constructor(v,C){super(C),this._themesService=v,this.cdRef=C,this.category=a.G.getCategoryById("themes"),this.title=s.f.getTranslation("choose_theme"),this.searchPlaceHolder=`${s.f.getTranslation("search_theme")}...`,this.list$=null}selectIcon(v,C){v.stopPropagation(),_.J.setChosenTheme(C),d.A.updateStepInfo({title:C.title,style:{color:o.r.BLUE}}),d.A.goToNext()}buildList(){this.list$=this._themesService.getThemes().pipe((0,c.b)(()=>this.showList()))}}return l.\u0275fac=function(v){return new(v||l)(n.Y36(t.O),n.Y36(n.sBO))},l.\u0275cmp=n.Xpm({type:l,selectors:[["theme-choice"]],features:[n.qOj],decls:7,vars:10,consts:[[3,"category","title"],[3,"placeHolder","searchStrInput"],[3,"loaded"],[1,"list"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"list-item__img",3,"preloadImg"],[1,"list-item__title"]],template:function(v,C){1&v&&(n._UZ(0,"category-title",0),n.TgZ(1,"search-input",1),n.NdJ("searchStrInput",function(i){return C.searchStr=i}),n.qZA(),n.TgZ(2,"spinner-wrapper",2),n.TgZ(3,"div",3),n.YNc(4,m,6,4,"figure",4),n.ALo(5,"filterIcons"),n.ALo(6,"async"),n.qZA(),n.qZA()),2&v&&(n.Q6J("category",C.category)("title",C.title),n.xp6(1),n.Q6J("placeHolder",C.searchPlaceHolder),n.xp6(1),n.Q6J("loaded",C.loaded),n.xp6(2),n.Q6J("ngForOf",n.xi3(5,5,n.lcZ(6,8,C.list$),C.searchStr)))},directives:[p.a,P.J,T.C,M.sg,x.n],pipes:[D.V,M.Ov,S.G],styles:[".list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:3rem}.list-item[_ngcontent-%COMP%]{padding:10px;border-radius:30px 0;box-shadow:0 0 10px 18px #ffffffbf;background-color:#ffffffbf;border:solid 2px rgba(158,158,158,.15);cursor:pointer}.list-item[_ngcontent-%COMP%]:hover{background-color:#ffffffe6;border-color:#9e9e9e4d}.list-item__img[_ngcontent-%COMP%]{display:block;margin:auto}.list-item__title[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}"],changeDetection:0}),l})()},1692:(A,g,e)=>{e.d(g,{j:()=>h});var a=e(3489);function h(c,s=null){return function(t){return t.lift(new o(c,s))}}class o{constructor(s,n){this.bufferSize=s,this.startBufferEvery=n,this.subscriberClass=n&&s!==n?_:d}call(s,n){return n.subscribe(new this.subscriberClass(s,this.bufferSize,this.startBufferEvery))}}class d extends a.L{constructor(s,n){super(s),this.bufferSize=n,this.buffer=[]}_next(s){const n=this.buffer;n.push(s),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])}_complete(){const s=this.buffer;s.length>0&&this.destination.next(s),super._complete()}}class _ extends a.L{constructor(s,n,t){super(s),this.bufferSize=n,this.startBufferEvery=t,this.buffers=[],this.count=0}_next(s){const{bufferSize:n,startBufferEvery:t,buffers:p,count:P}=this;this.count++,P%t==0&&p.push([]);for(let T=p.length;T--;){const M=p[T];M.push(s),M.length===n&&(p.splice(T,1),this.destination.next(M))}}_complete(){const{buffers:s,destination:n}=this;for(;s.length>0;){let t=s.shift();t.length>0&&n.next(t)}super._complete()}}}}]);