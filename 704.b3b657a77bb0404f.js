"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[704],{6330:(P,g,e)=>{e.d(g,{a:()=>d});var i=e(9771);const d=[{id:"themes",color:i.r.BLUE},{id:"memory",color:i.r.GREEN},{id:"attention",color:i.r.ORANGE},{id:"intellect",color:i.r.PINK}]},1159:(P,g,e)=>{e.r(g),e.d(g,{FindTheHalfConfigModule:()=>w});var I,U,i=e(9808),d=e(7072),a=e(4106),h=e(8450),f=e(395),c=e(4636),r=e(5562),t=e(3162),o=e(655),v=e(5713),M=e(5605),A=e(9417),T=e(2281),b=e(8929),S=e(567),R=e(1709),p=e(4850),O=e(9146),l=e(864),u=e(2868),E=e(373),_=e(2198),D=e(1692),B=e(7545),z=e(6792),F=e(6849),s=e(5e3),N=e(4853),H=e(9254),Z=e(4873),$=e(8889),y=e(2188),W=e(1834);class L extends $.l{constructor(n,m,G,K){super(G,K),this._elementRef=n,this._renderer=m,this.coeff=.5,I.set(this,null)}ngOnInit(){super.ngOnInit(),(0,o.YH)(this,I,this._elementRef.nativeElement,"f"),this._renderer.setStyle((0,o.Q_)(this,I,"f"),y.L.DISPLAY,"block"),this._renderer.setStyle((0,o.Q_)(this,I,"f"),y.L.MARGIN,"auto")}ngOnChanges(n){n.coeff.firstChange||this.setParentWidth()}setGameSizes(){requestAnimationFrame(()=>{const n=(0,o.Q_)(this,I,"f").parentElement.getBoundingClientRect().height;this._renderer.setStyle((0,o.Q_)(this,I,"f"),y.L.MAX_WIDTH,`${n}${W.N.PX}`),this._renderer.setStyle((0,o.Q_)(this,I,"f"),y.L.MAX_HEIGHT,`${n}${W.N.PX}`),(0,o.Q_)(this,I,"f").complete?this.setParentWidth():(0,o.Q_)(this,I,"f").onload=()=>this.setParentWidth()})}setParentWidth(){const n=(0,o.Q_)(this,I,"f").getBoundingClientRect().width;this._renderer.setStyle((0,o.Q_)(this,I,"f").parentElement,y.L.WIDTH,`${n*this.coeff}${W.N.PX}`)}}function Y(C,n){if(1&C){const m=s.EpF();s.TgZ(0,"figure",4),s.TgZ(1,"div",5),s.TgZ(2,"img",6),s.NdJ("click",function(){const X=s.CHM(m).$implicit;return s.oxw().item$.next(X)}),s.qZA(),s.qZA(),s.qZA()}if(2&C){const m=n.$implicit;s.ekj("border--dotted",!m.checked)("border-width--1",!m.checked)("border--solid",m.checked)("border-width--3",m.checked),s.s9C("id",m.item.id),s.xp6(1),s.Q6J("isCorrect",m.isCorrect),s.xp6(1),s.Udp("transform",m.shifted&&!m.found?"translateX(-50%)":"translateX(0)"),s.ekj("cursor--pointer",!m.found),s.Q6J("src",m.item.img,s.LSH)("halfImg",m.found?1:.5)}}I=new WeakMap,L.\u0275fac=function(n){return new(n||L)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.R0b),s.Y36(i.K0))},L.\u0275dir=s.lG2({type:L,selectors:[["","halfImg",""]],inputs:{coeff:["halfImg","coeff"]},features:[s.qOj,s.TTD]});class x{constructor(n,m){this._cdRef=n,this._themeItemsService=m,this.gameLoader=null,this.items=null,this.rowsAmount=v.k.getAgesConfig().amount/2,this.item$=new b.xQ,U.set(this,null)}ngOnInit(){this._buildGame()}ngOnDestroy(){var n;null===(n=(0,o.Q_)(this,U,"f"))||void 0===n||n.unsubscribe()}_buildGame(){this.gameLoader=this._themeItemsService.getItems().pipe((0,R.zg)(n=>M.$.getRandItems(n,v.k.getAgesConfig().amount)),(0,p.U)(n=>[{item:n,shifted:!0,angle:this._getAngle(),checked:!1,found:!1},{item:n,shifted:!1,angle:this._getAngle(),checked:!1,found:!1}]),(0,O.J)(),(0,l.q)(),(0,u.b)(n=>this.items=M.$.shuffle(n)),(0,O.J)(),(0,E.j)("item"),(0,l.q)(),(0,R.zg)(n=>(0,S.D)([T.r.preloadThemeItemsImgs(n),A.d.preloadThemeItemsTitleSounds(n)])),(0,u.b)(()=>this._setSubscriptions()))}_getAngle(){return v.k.getAgesConfig().rotated?M.$.getRndInteger(0,360):0}_setSubscriptions(){(0,o.YH)(this,U,this.item$.pipe((0,_.h)(n=>!n.found),(0,u.b)(n=>n.checked=!n.checked),(0,D.j)(2),(0,_.h)(n=>n[0].item.id!==n[1].item.id||n[0].item.id===n[1].item.id&&n[0].shifted!==n[1].shifted),(0,B.w)(n=>(0,o.mG)(this,void 0,void 0,function*(){n[0].item.id===n[1].item.id?(n.forEach(m=>{m.found=!0,m.isCorrect=!0}),yield n[0].item.playTitle()):(n.forEach(m=>m.isCorrect=!1),yield A.d.playErrorSound()),n.forEach(m=>{m.checked=!1,m.isCorrect=null}),this._cdRef.markForCheck()})),(0,_.h)(()=>!this.items.some(n=>!n.found)),(0,z.g)(100),(0,u.b)(()=>F.A.gameCompleted())).subscribe(),"f")}}U=new WeakMap,x.\u0275fac=function(n){return new(n||x)(s.Y36(s.sBO),s.Y36(T.r))},x.\u0275cmp=s.Xpm({type:x,selectors:[["find-the-half"]],decls:4,vars:3,consts:[[3,"gameLoader"],[1,"container","h--100"],["gridSizer","","columnsAmount","4",3,"rowsAmount"],["class","figure d--flex curve-border border--orange radial-gradient--soft-grey",3,"id","border--dotted","border-width--1","border--solid","border-width--3",4,"ngFor","ngForOf"],[1,"figure","d--flex","curve-border","border--orange","radial-gradient--soft-grey",3,"id"],[1,"item","d--flex","m--auto","p--relative","overflow--hidden",3,"isCorrect"],[3,"src","halfImg","click"]],template:function(n,m){1&n&&(s.TgZ(0,"game-spinner-wrapper",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.YNc(3,Y,3,16,"figure",3),s.qZA(),s.qZA(),s.qZA()),2&n&&(s.Q6J("gameLoader",m.gameLoader),s.xp6(2),s.s9C("rowsAmount",m.rowsAmount),s.xp6(1),s.Q6J("ngForOf",m.items))},directives:[N.Z,H.d,i.sg,Z.T,L],styles:[".curve-border[_ngcontent-%COMP%]{border-radius:80px 10px 80px 20px/20px 40px}.border-width--1[_ngcontent-%COMP%]{border-width:1px}.border-width--2[_ngcontent-%COMP%]{border-width:2px}.border-width--3[_ngcontent-%COMP%]{border-width:3px}.border-width--4[_ngcontent-%COMP%]{border-width:4px}.border--solid[_ngcontent-%COMP%]{border-style:solid}.border--dashed[_ngcontent-%COMP%]{border-style:dashed}.border--dotted[_ngcontent-%COMP%]{border-style:dotted}.border--blue[_ngcontent-%COMP%]{border-color:#5c74d7}.border--purple[_ngcontent-%COMP%]{border-color:#70b}.border--green[_ngcontent-%COMP%]{border-color:#00d36f}.border--orange[_ngcontent-%COMP%]{border-color:#ff9d2a}.border--pink[_ngcontent-%COMP%]{border-color:#ff2480}.border--white[_ngcontent-%COMP%]{border-color:#fff}.border--light-grey[_ngcontent-%COMP%]{border-color:#ccc}.border--medium-grey[_ngcontent-%COMP%]{border-color:#9e9e9e}.border--dark-grey[_ngcontent-%COMP%]{border-color:#333}.radial-gradient--soft-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#f0f0f0)}.radial-gradient--medium-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#dbdbdb)}.pulsate-fwd[_ngcontent-%COMP%]{-webkit-animation:pulsate-fwd .5s ease-in-out infinite both;animation:pulsate-fwd .5s ease-in-out infinite both}@-webkit-keyframes pulsate-fwd{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes pulsate-fwd{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.shake-horizontal[_ngcontent-%COMP%]{-webkit-animation:shake-horizontal .8s cubic-bezier(.455,.03,.515,.955) both;animation:shake-horizontal .8s cubic-bezier(.455,.03,.515,.955) both}@-webkit-keyframes shake-horizontal{0%,to{transform:translate(0)}10%,30%,50%,70%{transform:translate(-10px)}20%,40%,60%{transform:translate(10px)}80%{transform:translate(8px)}90%{transform:translate(-8px)}}@keyframes shake-horizontal{0%,to{transform:translate(0)}10%,30%,50%,70%{transform:translate(-10px)}20%,40%,60%{transform:translate(10px)}80%{transform:translate(8px)}90%{transform:translate(-8px)}}.container[_ngcontent-%COMP%]{display:grid;place-items:center}.item[_ngcontent-%COMP%]{width:80%;height:80%}"],changeDetection:0});var Q=e(933),J=e(2747);let j=(()=>{class C{}return C.\u0275fac=function(m){return new(m||C)},C.\u0275mod=s.oAB({type:C}),C.\u0275inj=s.cJS({imports:[[i.ez,Q.q,J.U]]}),C})(),w=(()=>{class C{}return C.\u0275fac=function(m){return new(m||C)},C.\u0275mod=s.oAB({type:C}),C.\u0275inj=s.cJS({imports:[[i.ez,f.GameStepsModule.forChild([h.N,c.Z,x]),a.f.forChild({agesConfig:new Map([[0,{amount:4,rotated:!1}],[1,{amount:6,rotated:!1}],[2,{amount:8,rotated:!0}]])}),r.P.forChild(),j,d.Bz.forChild(t.M)]]}),C})()},4106:(P,g,e)=>{e.d(g,{f:()=>c});var i=e(9808),d=e(933),a=e(6007),h=e(1233),f=e(5e3);let c=(()=>{class r{static forChild(o){return{ngModule:r,providers:[{provide:a.n,useValue:o.agesConfig},{provide:a.O,useValue:o.stepsToReset}]}}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=f.oAB({type:r}),r.\u0275inj=f.cJS({imports:[[i.ez,h.D,d.q]]}),r})()},8450:(P,g,e)=>{e.d(g,{N:()=>R});var i=e(6849),d=e(9771);const a={0:d.r.PINK,1:d.r.ORANGE,2:d.r.GREEN},h={0:"3 - 4",1:"4 - 5",2:"5 - 6"};class f{constructor(O,l){this.id=O;const u=h[this.id];this.title=`${u} ${l[u]}`,this.color=a[this.id]}}var c=e(5713),r=e(6007),t=e(4850),o=e(5e3),v=e(2273),M=e(9808);let A=(()=>{class p{static _getStyleProp(l){return`style.${l}`}ngOnInit(){this._setDefaultColors()}onMouseEnter(){this.color=this.borderColor=d.r.WHITE,this.bgColor=this.age.color,this.boxShadow=`0 0 16px 3px ${d.r.LIGHT_GREY}`}onMouseLeave(){this._setDefaultColors()}_setDefaultColors(){this.color=this.borderColor=this.age.color,this.bgColor=d.r.WHITE,this.boxShadow="none"}}return p.\u0275fac=function(l){return new(l||p)},p.\u0275dir=o.lG2({type:p,selectors:[["","ageItemColorize",""]],hostVars:8,hostBindings:function(l,u){1&l&&o.NdJ("mouseenter",function(){return u.onMouseEnter()})("mouseleave",function(){return u.onMouseLeave()}),2&l&&o.Udp("color",u.color)("border-color",u.borderColor)("background-color",u.bgColor)("box-shadow",u.boxShadow)},inputs:{age:["ageItemColorize","age"]}}),p})();var T=e(829);function b(p,O){if(1&p){const l=o.EpF();o.TgZ(0,"div",4),o.NdJ("click",function(){const _=o.CHM(l).$implicit;return o.oxw(2).chooseAge(_)}),o._uU(1),o.qZA()}if(2&p){const l=O.$implicit;o.Q6J("ageItemColorize",l),o.xp6(1),o.hij(" ",l.title," ")}}function S(p,O){if(1&p&&(o.TgZ(0,"div",1),o.TgZ(1,"div",2),o._uU(2),o.ALo(3,"capitalizeFirstLetter"),o.qZA(),o.YNc(4,b,2,2,"div",3),o.qZA()),2&p){const l=O.ngIf;o.xp6(2),o.hij("",o.lcZ(3,2,l.title),"?"),o.xp6(2),o.Q6J("ngForOf",l.ages)}}let R=(()=>{class p{constructor(l,u,E){this._agesConfig=l,this._stepsToReset=u,this._translationsService=E,this.content$=this._translationsService.loadTranslation("ages").pipe((0,t.U)(_=>({title:_.title,ages:Array.from(this._agesConfig.keys()).map(D=>new f(D,_))})))}ngOnInit(){c.k.setAgesConfig(this._agesConfig),this._stepsToReset&&i.A.resetSteps(this._stepsToReset)}chooseAge(l){c.k.setAgeId(l.id),i.A.updateStepInfo({title:l.title,style:{color:l.color}}),i.A.goToNext()}}return p.\u0275fac=function(l){return new(l||p)(o.Y36(r.n),o.Y36(r.O),o.Y36(v.f))},p.\u0275cmp=o.Xpm({type:p,selectors:[["age-choice"]],decls:2,vars:3,consts:[["class","ages-choice",4,"ngIf"],[1,"ages-choice"],[1,"ages-choice__title"],["class","ages-choice__age",3,"ageItemColorize","click",4,"ngFor","ngForOf"],[1,"ages-choice__age",3,"ageItemColorize","click"]],template:function(l,u){1&l&&(o.YNc(0,S,5,4,"div",0),o.ALo(1,"async")),2&l&&o.Q6J("ngIf",o.lcZ(1,1,u.content$))},directives:[M.O5,M.sg,A],pipes:[M.Ov,T.G],styles:[".ages-choice__title[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;font-size:3rem;color:#70b}.ages-choice__age[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:2rem auto;padding:.5rem;text-align:center;font-size:2rem;font-weight:bolder;border:2px solid;border-radius:50%;cursor:pointer}"],changeDetection:0}),p})()},6007:(P,g,e)=>{e.d(g,{n:()=>d,O:()=>a});var i=e(5e3);const d=new i.OlP("AGES_CONFIG_TOKEN"),a=new i.OlP("STEPS_TO_RESET_TOKEN")},9254:(P,g,e)=>{e.d(g,{d:()=>r});var i=e(9808),d=e(2188),a=e(4729),h=e(8889),f=e(1834),c=e(5e3);let r=(()=>{class t extends h.l{constructor(v,M,A,T){super(A,T),this._elementRef=v,this._renderer=M,this.rowsAmount=1,this.columnsAmount=1,this.itemSize=300,this.coeff=1}ngOnInit(){super.ngOnInit(),this._renderer.setStyle(this._elementRef.nativeElement,d.L.DISPLAY,"grid"),this._renderer.setStyle(this._elementRef.nativeElement,d.L.GRID_GAP,`0.5${f.N.REM}`),this._renderer.setStyle(this._elementRef.nativeElement,d.L.JUSTIFY_CONTENT,"center")}setGameSizes(){const v=Math.min(this.itemSize,a.B.getGridContainerMinDimension()/Math.max(this.rowsAmount,this.columnsAmount)-12);this._renderer.setStyle(this._elementRef.nativeElement,d.L.GRID_TEMPLATE_COLUMNS,`repeat(${this.columnsAmount}, ${v}${f.N.PX})`),this._renderer.setStyle(this._elementRef.nativeElement,d.L.GRID_TEMPLATE_ROWS,`repeat(${this.rowsAmount}, ${v*this.coeff}${f.N.PX})`)}}return t.\u0275fac=function(v){return new(v||t)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.R0b),c.Y36(i.K0))},t.\u0275dir=c.lG2({type:t,selectors:[["","gridSizer",""]],inputs:{rowsAmount:"rowsAmount",columnsAmount:"columnsAmount",itemSize:"itemSize",coeff:"coeff"},features:[c.qOj]}),t})()},9513:(P,g,e)=>{e.d(g,{n:()=>r});var c,i=e(655),d=e(8744),a=e(2986),h=e(2868),f=e(5e3);class r{constructor(o,v){this._elementRef=o,this._renderer=v,c.set(this,null)}ngOnInit(){if("IMG"!==this._elementRef.nativeElement.tagName)throw new Error("Element should be an image");(0,i.YH)(this,c,d.O.getImage(this.src).pipe((0,a.q)(1),(0,h.b)(o=>this._renderer.setAttribute(this._elementRef.nativeElement,"src",o.src))).subscribe(),"f")}ngOnDestroy(){var o;null===(o=(0,i.Q_)(this,c,"f"))||void 0===o||o.unsubscribe()}}c=new WeakMap,r.\u0275fac=function(o){return new(o||r)(f.Y36(f.SBq),f.Y36(f.Qsj))},r.\u0275dir=f.lG2({type:r,selectors:[["","preloadImg",""]],inputs:{src:["preloadImg","src"]}})},7112:(P,g,e)=>{e.d(g,{C:()=>i});var i=(()=>{return(d=i||(i={})).SHAKE_HORIZONTAL="shake-horizontal",d.SLIDE_IN_FWD_CENTER="slide-in-fwd-center",d.PULSATE_FWD="pulsate-fwd",d.ROTATE_IN_CENTER="rotate-in-center",d.ROTATE_OUT_CENTER="rotate-out-center",d.BOUNCE_IN_FWD="bounce-in-fwd",i;var d})()},3162:(P,g,e)=>{e.d(g,{M:()=>i});const i=[{path:"",loadChildren:()=>Promise.resolve().then(e.bind(e,395)).then(d=>d.GameStepsModule)}]},9117:(P,g,e)=>{e.d(g,{W:()=>d});var i=e(2273);class d{constructor(h){this.id=null,this.title="",this.color="",this.route="",this.id=h.id,this.title=i.f.getTranslation(h.id),this.color=h.color,this.route=`${this.id}`}}},5605:(P,g,e)=>{e.d(g,{$:()=>i});class i{static shuffle(a){if(a.length<1)return console.warn("Empty array!"),a;const h=[...a];for(;!i._isArrShuffled(a,h);)h.sort(()=>Math.random()-.5);return h}static _isArrShuffled(a,h){let f=!1;for(const[c,r]of a.entries())if(r!==h[c]){f=!0;break}return f}static getRandItems(a,h=a.length){if(h>a.length)throw new Error(`maxArrLength ${h} should be equal or less than items length ${a.length}`);const f=i.shuffle(a);return f.length=h,f}static getDoubledRandItems(a,h=a.length){const f=i.getRandItems(a,h);return i.shuffle([...f,...f])}static uniq(a){return Array.from(new Set(a))}static getSequence(a,h=0){const f=[];for(let c=h;c<a;c++)f.push(c);return f}static groupArrByLength(a,h){const f=new Map;let c=0,r=0,t=0;for(;t<a.length;)r=c*h,t=r+h,f.set(c,a.slice(r,t)),c++;return f}static getRndInteger(a,h){return Math.floor(Math.random()*(h-a))+a}static getRndArrElem(a){return a[i.getRndInteger(0,a.length)]}}},4636:(P,g,e)=>{e.d(g,{Z:()=>O});var i=e(9424),d=e(4375),a=e(9771),h=e(6849),f=e(8397),c=e(2868),r=e(2273),t=e(5e3),o=e(2205),v=e(5316),M=e(5610),A=e(965),T=e(9808),b=e(9513),S=e(8550),R=e(829);function p(l,u){if(1&l){const E=t.EpF();t.TgZ(0,"figure",5),t.NdJ("click",function(D){const z=t.CHM(E).$implicit;return t.oxw().selectIcon(D,z)}),t._UZ(1,"img",6),t.TgZ(2,"figcaption"),t.TgZ(3,"div",7),t._uU(4),t.ALo(5,"capitalizeFirstLetter"),t.qZA(),t.qZA(),t.qZA()}if(2&l){const E=u.$implicit;t.xp6(1),t.Q6J("preloadImg",E.icon),t.xp6(3),t.Oqu(t.lcZ(5,2,E.title))}}let O=(()=>{class l extends d.Q{constructor(E,_){super(_),this._themesService=E,this.cdRef=_,this.category=i.G.getCategoryById("themes"),this.title=r.f.getTranslation("choose_theme"),this.searchPlaceHolder=`${r.f.getTranslation("search_theme")}...`,this.list$=null}selectIcon(E,_){E.stopPropagation(),f.J.setChosenTheme(_),h.A.updateStepInfo({title:_.title,style:{color:a.r.BLUE}}),h.A.goToNext()}buildList(){this.list$=this._themesService.getThemes().pipe((0,c.b)(()=>this.showList()))}}return l.\u0275fac=function(E){return new(E||l)(t.Y36(o.O),t.Y36(t.sBO))},l.\u0275cmp=t.Xpm({type:l,selectors:[["theme-choice"]],features:[t.qOj],decls:7,vars:10,consts:[[3,"category","title"],[3,"placeHolder","searchStrInput"],[3,"loaded"],[1,"list"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"list-item__img",3,"preloadImg"],[1,"list-item__title"]],template:function(E,_){1&E&&(t._UZ(0,"category-title",0),t.TgZ(1,"search-input",1),t.NdJ("searchStrInput",function(B){return _.searchStr=B}),t.qZA(),t.TgZ(2,"spinner-wrapper",2),t.TgZ(3,"div",3),t.YNc(4,p,6,4,"figure",4),t.ALo(5,"filterIcons"),t.ALo(6,"async"),t.qZA(),t.qZA()),2&E&&(t.Q6J("category",_.category)("title",_.title),t.xp6(1),t.Q6J("placeHolder",_.searchPlaceHolder),t.xp6(1),t.Q6J("loaded",_.loaded),t.xp6(2),t.Q6J("ngForOf",t.xi3(5,5,t.lcZ(6,8,_.list$),_.searchStr)))},directives:[v.a,M.J,A.C,T.sg,b.n],pipes:[S.V,T.Ov,R.G],styles:[".list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:3rem}.list-item[_ngcontent-%COMP%]{padding:10px;border-radius:30px 0;box-shadow:0 0 10px 18px #ffffffbf;background-color:#ffffffbf;border:solid 2px rgba(158,158,158,.15);cursor:pointer}.list-item[_ngcontent-%COMP%]:hover{background-color:#ffffffe6;border-color:#9e9e9e4d}.list-item__img[_ngcontent-%COMP%]{display:block;margin:auto}.list-item__title[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}"],changeDetection:0}),l})()},1692:(P,g,e)=>{e.d(g,{j:()=>d});var i=e(3489);function d(c,r=null){return function(o){return o.lift(new a(c,r))}}class a{constructor(r,t){this.bufferSize=r,this.startBufferEvery=t,this.subscriberClass=t&&r!==t?f:h}call(r,t){return t.subscribe(new this.subscriberClass(r,this.bufferSize,this.startBufferEvery))}}class h extends i.L{constructor(r,t){super(r),this.bufferSize=t,this.buffer=[]}_next(r){const t=this.buffer;t.push(r),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])}_complete(){const r=this.buffer;r.length>0&&this.destination.next(r),super._complete()}}class f extends i.L{constructor(r,t,o){super(r),this.bufferSize=t,this.startBufferEvery=o,this.buffers=[],this.count=0}_next(r){const{bufferSize:t,startBufferEvery:o,buffers:v,count:M}=this;this.count++,M%o==0&&v.push([]);for(let A=v.length;A--;){const T=v[A];T.push(r),T.length===t&&(v.splice(A,1),this.destination.next(T))}}_complete(){const{buffers:r,destination:t}=this;for(;r.length>0;){let o=r.shift();o.length>0&&t.next(o)}super._complete()}}}}]);