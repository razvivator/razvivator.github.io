"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[852],{6330:(O,p,e)=>{e.d(p,{a:()=>u});var t=e(9771);const u=[{id:"themes",color:t.r.BLUE},{id:"memory",color:t.r.GREEN},{id:"attention",color:t.r.ORANGE},{id:"intellect",color:t.r.PINK}]},322:(O,p,e)=>{e.r(p),e.d(p,{FindAccordanceConfigModule:()=>k});var t=e(9808),u=e(7072),o=e(395),r=e(4636),c=e(5562),a=e(3162),_=e(655),n=e(2281),f=e(8397),l=e(1995),E=e(1340);class h{constructor(s){this.id="",this.img="",this.id=s.id,this.img=`${f.J.getCustomGameThemeFolder()}img/${s.id}.${s.ext}`}}var v=e(9146),T=e(4850),D=e(864),i=e(5e3),S=e(520);class M{constructor(s){this._http=s}getAccordances(){const s=`${f.J.getCustomGameThemeFolder()}accordances.${l.D.JSON}`;return this._fetchAccordances(s).pipe((0,v.J)(),(0,T.U)(m=>new h(m)),(0,D.q)())}_fetchAccordances(s){return this._http.get(s)}}M.\u0275fac=function(s){return new(s||M)(i.LFG(S.eN))},M.\u0275prov=i.Yz7({token:M,factory:M.\u0275fac}),(0,_.gn)([(0,E.q)()],M.prototype,"_fetchAccordances",null);var A=e(8004);let P=(()=>{class d extends A.U{constructor(){super()}ngOnInit(){super.onDataLoad(this.data)}}return d.\u0275fac=function(m){return new(m||d)},d.\u0275cmp=i.Xpm({type:d,selectors:[["item"]],inputs:{data:"data"},features:[i.qOj],decls:2,vars:1,consts:[[1,"img","d--block","w-max--100","m--auto",3,"src"]],template:function(m,I){1&m&&(i.TgZ(0,"figure"),i._UZ(1,"img",0),i.qZA()),2&m&&(i.xp6(1),i.Q6J("src",I.data.img,i.LSH))},styles:[".img[_ngcontent-%COMP%]{max-height:400px}"],changeDetection:0}),d})();var y,B,C=e(5605),g=e(2868),L=e(373),R=e(7545),U=e(1709),F=e(2198),J=e(1692),Z=e(9417),W=e(6849),z=e(8929),G=e(4853),$=e(3832),Q=e(1219),N=e(550),Y=e(1643);const w=["itemsCarousel"];function j(d,s){if(1&d){const m=i.EpF();i.TgZ(0,"carousel",6,7),i.NdJ("transitionEnd",function(){return i.CHM(m),i.oxw().unblock()}),i.qZA()}if(2&d){const m=i.oxw();i.Q6J("slides",m.items)("blockManualSwiping",!0)("itemComponent",m.itemComponent)}}class x{constructor(s,m){this._themeItemsService=s,this._findAccordanceService=m,this.gameLoader=null,this.accordances=null,this.items=null,this.itemComponent=P,this.answers=[],this.accordance$=new z.xQ,y.set(this,!1),B.set(this,null)}ngOnInit(){this._buildGame()}ngOnDestroy(){var s;null===(s=(0,_.Q_)(this,B,"f"))||void 0===s||s.unsubscribe()}unblock(){(0,_.YH)(this,y,!1,"f")}_buildGame(){this.gameLoader=this._findAccordanceService.getAccordances().pipe((0,g.b)(s=>this.accordances=C.$.shuffle(s)),(0,v.J)(),(0,L.j)("id"),(0,D.q)(),(0,R.w)(s=>this._themeItemsService.getItems(m=>s.includes(m.id))),(0,g.b)(s=>this.items=C.$.shuffle(s)),(0,U.zg)(()=>n.r.preloadThemeItemsImgs([].concat(this.accordances,this.items))),(0,g.b)(()=>this._setSubscription()))}_setSubscription(){(0,_.YH)(this,B,this.accordance$.pipe((0,F.h)(()=>!(0,_.Q_)(this,y,"f")),(0,g.b)(()=>(0,_.YH)(this,y,!0,"f")),(0,T.U)(s=>s.id===this.itemsCarouselVCh.currentItem.id),(0,R.w)(s=>(0,_.mG)(this,void 0,void 0,function*(){this.answers.push(s),s?yield Z.d.playRightSound():yield Z.d.playErrorSound(),this.itemsCarouselVCh.slideToRight()})),(0,J.j)(this.items.length),(0,g.b)(()=>this.answers.some(s=>!s)?W.A.gameFailed():W.A.gameCompleted())).subscribe(),"f")}}y=new WeakMap,B=new WeakMap,x.\u0275fac=function(s){return new(s||x)(i.Y36(n.r),i.Y36(M))},x.\u0275cmp=i.Xpm({type:x,selectors:[["find-accordance"]],viewQuery:function(s,m){if(1&s&&i.Gf(w,5),2&s){let I;i.iGM(I=i.CRH())&&(m.itemsCarouselVCh=I.first)}},features:[i._Bn([M])],decls:6,vars:5,consts:[[3,"gameLoader"],[1,"container","h--100"],[1,"carousel-container","overflow--hidden"],[3,"slides","blockManualSwiping","itemComponent","transitionEnd",4,"ngIf"],[3,"isVisible","items","itemClick"],[3,"answers"],[3,"slides","blockManualSwiping","itemComponent","transitionEnd"],["itemsCarousel",""]],template:function(s,m){1&s&&(i.TgZ(0,"game-spinner-wrapper",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.YNc(3,j,2,3,"carousel",3),i.qZA(),i.TgZ(4,"theme-items-bar",4),i.NdJ("itemClick",function(K){return m.accordance$.next(K)}),i.qZA(),i._UZ(5,"answers-bar",5),i.qZA(),i.qZA()),2&s&&(i.Q6J("gameLoader",m.gameLoader),i.xp6(3),i.Q6J("ngIf",null==m.items?null:m.items.length),i.xp6(1),i.Q6J("isVisible",(null==m.accordances?null:m.accordances.length)>0)("items",m.accordances),i.xp6(1),i.Q6J("answers",m.answers))},directives:[G.Z,t.O5,$.M,Q.B,N.r,Y.F],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr -webkit-min-content -webkit-min-content;grid-template-rows:1fr min-content min-content}.carousel-container[_ngcontent-%COMP%]{align-self:center}"],changeDetection:0});var H=e(933),b=e(2747),V=e(7316);let X=(()=>{class d{}return d.\u0275fac=function(m){return new(m||d)},d.\u0275mod=i.oAB({type:d}),d.\u0275inj=i.cJS({imports:[[t.ez,c.P.forChild(),H.q,b.U,V.b]]}),d})(),k=(()=>{class d{}return d.\u0275fac=function(m){return new(m||d)},d.\u0275mod=i.oAB({type:d}),d.\u0275inj=i.cJS({imports:[[t.ez,o.GameStepsModule.forChild([r.Z,x]),c.P.forChild(),X,u.Bz.forChild(a.M)]]}),d})()},9254:(O,p,e)=>{e.d(p,{d:()=>_});var t=e(9808),u=e(2188),o=e(4729),r=e(8889),c=e(1834),a=e(5e3);let _=(()=>{class n extends r.l{constructor(l,E,h,v){super(h,v),this._elementRef=l,this._renderer=E,this.rowsAmount=1,this.columnsAmount=1,this.itemSize=300,this.coeff=1}ngOnInit(){super.ngOnInit(),this._renderer.setStyle(this._elementRef.nativeElement,u.L.DISPLAY,"grid"),this._renderer.setStyle(this._elementRef.nativeElement,u.L.GRID_GAP,`0.5${c.N.REM}`),this._renderer.setStyle(this._elementRef.nativeElement,u.L.JUSTIFY_CONTENT,"center")}setGameSizes(){const l=Math.min(this.itemSize,o.B.getGridContainerMinDimension()/Math.max(this.rowsAmount,this.columnsAmount)-12);this._renderer.setStyle(this._elementRef.nativeElement,u.L.GRID_TEMPLATE_COLUMNS,`repeat(${this.columnsAmount}, ${l}${c.N.PX})`),this._renderer.setStyle(this._elementRef.nativeElement,u.L.GRID_TEMPLATE_ROWS,`repeat(${this.rowsAmount}, ${l*this.coeff}${c.N.PX})`)}}return n.\u0275fac=function(l){return new(l||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.R0b),a.Y36(t.K0))},n.\u0275dir=a.lG2({type:n,selectors:[["","gridSizer",""]],inputs:{rowsAmount:"rowsAmount",columnsAmount:"columnsAmount",itemSize:"itemSize",coeff:"coeff"},features:[a.qOj]}),n})()},9513:(O,p,e)=>{e.d(p,{n:()=>_});var a,t=e(655),u=e(8744),o=e(2986),r=e(2868),c=e(5e3);class _{constructor(f,l){this._elementRef=f,this._renderer=l,a.set(this,null)}ngOnInit(){if("IMG"!==this._elementRef.nativeElement.tagName)throw new Error("Element should be an image");(0,t.YH)(this,a,u.O.getImage(this.src).pipe((0,o.q)(1),(0,r.b)(f=>this._renderer.setAttribute(this._elementRef.nativeElement,"src",f.src))).subscribe(),"f")}ngOnDestroy(){var f;null===(f=(0,t.Q_)(this,a,"f"))||void 0===f||f.unsubscribe()}}a=new WeakMap,_.\u0275fac=function(f){return new(f||_)(c.Y36(c.SBq),c.Y36(c.Qsj))},_.\u0275dir=c.lG2({type:_,selectors:[["","preloadImg",""]],inputs:{src:["preloadImg","src"]}})},9117:(O,p,e)=>{e.d(p,{W:()=>u});var t=e(2273);class u{constructor(r){this.id=null,this.title="",this.color="",this.route="",this.id=r.id,this.title=t.f.getTranslation(r.id),this.color=r.color,this.route=`${this.id}`}}},5605:(O,p,e)=>{e.d(p,{$:()=>t});class t{static shuffle(o){if(o.length<1)return console.warn("Empty array!"),o;const r=[...o];for(;!t._isArrShuffled(o,r);)r.sort(()=>Math.random()-.5);return r}static _isArrShuffled(o,r){let c=!1;for(const[a,_]of o.entries())if(_!==r[a]){c=!0;break}return c}static getRandItems(o,r=o.length){if(r>o.length)throw new Error(`maxArrLength ${r} should be equal or less than items length ${o.length}`);const c=t.shuffle(o);return c.length=r,c}static getDoubledRandItems(o,r=o.length){const c=t.getRandItems(o,r);return t.shuffle([...c,...c])}static uniq(o){return Array.from(new Set(o))}static getSequence(o,r=0){const c=[];for(let a=r;a<o;a++)c.push(a);return c}static groupArrByLength(o,r){const c=new Map;let a=0,_=0,n=0;for(;n<o.length;)_=a*r,n=_+r,c.set(a,o.slice(_,n)),a++;return c}static getRndInteger(o,r){return Math.floor(Math.random()*(r-o))+o}static getRndArrElem(o){return o[t.getRndInteger(0,o.length)]}}},4636:(O,p,e)=>{e.d(p,{Z:()=>M});var t=e(9424),u=e(4375),o=e(9771),r=e(6849),c=e(8397),a=e(2868),_=e(2273),n=e(5e3),f=e(2205),l=e(5316),E=e(5610),h=e(965),v=e(9808),T=e(9513),D=e(8550),i=e(829);function S(A,P){if(1&A){const C=n.EpF();n.TgZ(0,"figure",5),n.NdJ("click",function(L){const U=n.CHM(C).$implicit;return n.oxw().selectIcon(L,U)}),n._UZ(1,"img",6),n.TgZ(2,"figcaption"),n.TgZ(3,"div",7),n._uU(4),n.ALo(5,"capitalizeFirstLetter"),n.qZA(),n.qZA(),n.qZA()}if(2&A){const C=P.$implicit;n.xp6(1),n.Q6J("preloadImg",C.icon),n.xp6(3),n.Oqu(n.lcZ(5,2,C.title))}}let M=(()=>{class A extends u.Q{constructor(C,g){super(g),this._themesService=C,this.cdRef=g,this.category=t.G.getCategoryById("themes"),this.title=_.f.getTranslation("choose_theme"),this.searchPlaceHolder=`${_.f.getTranslation("search_theme")}...`,this.list$=null}selectIcon(C,g){C.stopPropagation(),c.J.setChosenTheme(g),r.A.updateStepInfo({title:g.title,style:{color:o.r.BLUE}}),r.A.goToNext()}buildList(){this.list$=this._themesService.getThemes().pipe((0,a.b)(()=>this.showList()))}}return A.\u0275fac=function(C){return new(C||A)(n.Y36(f.O),n.Y36(n.sBO))},A.\u0275cmp=n.Xpm({type:A,selectors:[["theme-choice"]],features:[n.qOj],decls:7,vars:10,consts:[[3,"category","title"],[3,"placeHolder","searchStrInput"],[3,"loaded"],[1,"list"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"list-item__img",3,"preloadImg"],[1,"list-item__title"]],template:function(C,g){1&C&&(n._UZ(0,"category-title",0),n.TgZ(1,"search-input",1),n.NdJ("searchStrInput",function(R){return g.searchStr=R}),n.qZA(),n.TgZ(2,"spinner-wrapper",2),n.TgZ(3,"div",3),n.YNc(4,S,6,4,"figure",4),n.ALo(5,"filterIcons"),n.ALo(6,"async"),n.qZA(),n.qZA()),2&C&&(n.Q6J("category",g.category)("title",g.title),n.xp6(1),n.Q6J("placeHolder",g.searchPlaceHolder),n.xp6(1),n.Q6J("loaded",g.loaded),n.xp6(2),n.Q6J("ngForOf",n.xi3(5,5,n.lcZ(6,8,g.list$),g.searchStr)))},directives:[l.a,E.J,h.C,v.sg,T.n],pipes:[D.V,v.Ov,i.G],styles:[".list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:3rem}.list-item[_ngcontent-%COMP%]{padding:10px;border-radius:30px 0;box-shadow:0 0 10px 18px #ffffffbf;background-color:#ffffffbf;border:solid 2px rgba(158,158,158,.15);cursor:pointer}.list-item[_ngcontent-%COMP%]:hover{background-color:#ffffffe6;border-color:#9e9e9e4d}.list-item__img[_ngcontent-%COMP%]{display:block;margin:auto}.list-item__title[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}"],changeDetection:0}),A})()},3832:(O,p,e)=>{e.d(p,{M:()=>f});var t=e(5e3),u=e(9808),o=e(9254),r=e(829);function c(l,E){if(1&l&&(t.TgZ(0,"header",2),t._uU(1),t.ALo(2,"capitalizeFirstLetter"),t.qZA()),2&l){const h=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,h.header))}}function a(l,E){if(1&l&&(t.TgZ(0,"figcaption",8),t._uU(1),t.qZA()),2&l){const h=t.oxw().$implicit;t.Q6J("ngStyle",h.titleStyle),t.xp6(1),t.hij(" ",h.title," ")}}function _(l,E){if(1&l){const h=t.EpF();t.TgZ(0,"figure",5),t.TgZ(1,"img",6),t.NdJ("click",function(T){const i=t.CHM(h).$implicit;return t.oxw(2).onItemClick(T,i)}),t.qZA(),t.YNc(2,a,2,2,"figcaption",7),t.qZA()}if(2&l){const h=E.$implicit,v=t.oxw(2);t.xp6(1),t.Q6J("src",h.img,t.LSH)("ngStyle",h.imgStyle),t.xp6(1),t.Q6J("ngIf",v.showTitle)}}function n(l,E){if(1&l&&(t.TgZ(0,"div",3),t.YNc(1,_,3,3,"figure",4),t.qZA()),2&l){const h=t.oxw();t.s9C("columnsAmount",h.items.length),t.xp6(1),t.Q6J("ngForOf",h.items)}}let f=(()=>{class l{constructor(){this.items=[],this.header="",this.showTitle=!1,this.itemClick=new t.vpe}onItemClick(h,v){h.stopPropagation(),this.itemClick.emit(v)}}return l.\u0275fac=function(h){return new(h||l)},l.\u0275cmp=t.Xpm({type:l,selectors:[["theme-items-bar"]],inputs:{items:"items",header:"header",showTitle:"showTitle"},outputs:{itemClick:"itemClick"},decls:2,vars:2,consts:[["class","header text--center",4,"ngIf"],["gridSizer","","itemSize","100",3,"columnsAmount",4,"ngIf"],[1,"header","text--center"],["gridSizer","","itemSize","100",3,"columnsAmount"],["class","figure d--flex m--auto h--100",4,"ngFor","ngForOf"],[1,"figure","d--flex","m--auto","h--100"],[1,"figure__img","d--block","m--auto","cursor--pointer",3,"src","ngStyle","click"],["class","figure__title text--center",3,"ngStyle",4,"ngIf"],[1,"figure__title","text--center",3,"ngStyle"]],template:function(h,v){1&h&&(t.YNc(0,c,3,3,"header",0),t.YNc(1,n,2,2,"div",1)),2&h&&(t.Q6J("ngIf",v.header),t.xp6(1),t.Q6J("ngIf",null==v.items?null:v.items.length))},directives:[u.O5,o.d,u.sg,u.PC],pipes:[r.G],styles:[".radial-gradient--soft-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#f0f0f0)}.radial-gradient--medium-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#dbdbdb)}.header[_ngcontent-%COMP%]{font-size:2rem;font-style:italic}@media screen and (max-width: 567px){.header[_ngcontent-%COMP%]{font-size:1rem}}.figure[_ngcontent-%COMP%]{flex-direction:column}.figure__img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.figure__title[_ngcontent-%COMP%]{font-size:1.25rem}@media screen and (max-width: 567px){.figure__title[_ngcontent-%COMP%]{font-size:1rem}}@media screen and (max-width: 480px){.figure__title[_ngcontent-%COMP%]{display:none}}"]}),l})()}}]);