"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[923],{6330:(M,E,t)=>{t.d(E,{a:()=>v});var e=t(9771);const v=[{id:"themes",color:e.r.BLUE},{id:"memory",color:e.r.GREEN},{id:"attention",color:e.r.ORANGE},{id:"intellect",color:e.r.PINK}]},3567:(M,E,t)=>{t.r(E),t.d(E,{WhatIsForgotConfigModule:()=>Q});var e=t(9808),v=t(8035),i=t(5059),c=t(395),m=t(4636),s=t(5562),u=t(933),o=t(2747),n=t(5e3);let _=(()=>{class f{}return f.\u0275fac=function(g){return new(g||f)},f.\u0275mod=n.oAB({type:f}),f.\u0275inj=n.cJS({imports:[[e.ez,s.P.forChild(),u.q,o.U]]}),f})();var I=t(655),d=t(2281),C=t(5605),D=t(1340),P=t(8397),A=t(1995),S=t(520),h=t(9082);class a{constructor(r,g){this._http=r,this._addStepsService=g}getItemsProps(){const r=`${P.J.getCustomGameThemeFolder()}${P.J.getChosenSetSegment(this._addStepsService.chosenSetIndex)}/items-props.${A.D.JSON}`;return this._fetchProps(r)}_fetchProps(r){return this._http.get(r)}}a.\u0275fac=function(r){return new(r||a)(n.LFG(S.eN),n.LFG(h.S))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac}),(0,I.gn)([(0,D.q)()],a.prototype,"_fetchProps",null);var l=t(613);class p{constructor(r,g){this.themeItem=r,this.style=null;const x=new l.m(g.coords);this.style=Object.assign(Object.assign({},g.style),x.style)}}var B,O=t(9417),R=t(8929),L=t(567),y=t(4850),F=t(1709),Z=t(2868),K=t(2198),$=t(7545),J=t(2273),z=t(4853),G=t(3832);function N(f,r){if(1&f&&n._UZ(0,"img",6),2&f){const g=r.$implicit;n.Q6J("src",g.themeItem.img,n.LSH)("ngStyle",g.style)}}function Y(f,r){if(1&f){const g=n.EpF();n.TgZ(0,"theme-items-bar",7),n.NdJ("itemClick",function(T){return n.CHM(g),n.oxw().item$.next(T)}),n.ALo(1,"async"),n.qZA()}if(2&f){const g=n.oxw();n.Q6J("items",g.itemsToChoose)("header",n.lcZ(1,2,g.itemsHeader$))}}class W{constructor(r,g,x,T){this._themeItemsService=r,this._whatIsForgotService=g,this._translationService=x,this._cdRef=T,this.gameLoader=null,this.bg=null,this.items=null,this.itemsToChoose=null,this.props=null,this.item$=new R.xQ,this.itemsHeader$=this._translationService.loadTranslation("chapters/games/intellect").pipe((0,y.U)(U=>U.what_is_forgot)),B.set(this,null)}ngOnInit(){this._buildGame()}ngOnDestroy(){var r;null===(r=(0,I.Q_)(this,B,"f"))||void 0===r||r.unsubscribe()}_buildGame(){this.gameLoader=(0,L.D)({items:this._themeItemsService.getItems(),props:this._whatIsForgotService.getItemsProps()}).pipe((0,y.U)(r=>{this.bg=r.items.find(T=>"bg"===T.id),this.itemsToChoose=r.items.filter(T=>"bg"!==T.id),this.props=r.props;const x=C.$.getRndInteger(0,this.itemsToChoose.length-1);return this.items=this.itemsToChoose.reduce((T,U,j)=>(j!==x&&T.push(this.getWhatIsForgotItem(U)),T),[]),r.items}),(0,F.zg)(r=>d.r.preloadThemeItemsImgs(r)),(0,Z.b)(()=>this._setSubscription()))}_setSubscription(){(0,I.YH)(this,B,this.item$.pipe((0,K.h)(()=>this.items.length!==this.itemsToChoose.length),(0,$.w)(r=>(0,I.mG)(this,void 0,void 0,function*(){this.items.some(g=>g.themeItem.id===r.id)?yield O.d.playErrorSound():(this.items.push(this.getWhatIsForgotItem(r)),this._cdRef.markForCheck(),yield O.d.playWinSound())}))).subscribe(),"f")}getWhatIsForgotItem(r){const g=this.props.find(x=>x.id===r.id);return new p(r,g)}}B=new WeakMap,W.\u0275fac=function(r){return new(r||W)(n.Y36(d.r),n.Y36(a),n.Y36(J.f),n.Y36(n.sBO))},W.\u0275cmp=n.Xpm({type:W,selectors:[["what-is-forgot"]],features:[n._Bn([a])],decls:6,vars:4,consts:[[3,"gameLoader"],[1,"container"],[1,"items"],[1,"d--block","w--100",3,"src"],["class","d--block p--absolute",3,"src","ngStyle",4,"ngFor","ngForOf"],[3,"items","header","itemClick",4,"ngIf"],[1,"d--block","p--absolute",3,"src","ngStyle"],[3,"items","header","itemClick"]],template:function(r,g){1&r&&(n.TgZ(0,"game-spinner-wrapper",0),n.TgZ(1,"div",1),n.TgZ(2,"figure",2),n._UZ(3,"img",3),n.YNc(4,N,1,2,"img",4),n.qZA(),n.YNc(5,Y,2,4,"theme-items-bar",5),n.qZA(),n.qZA()),2&r&&(n.Q6J("gameLoader",g.gameLoader),n.xp6(3),n.Q6J("src",null==g.bg?null:g.bg.img,n.LSH),n.xp6(1),n.Q6J("ngForOf",g.items),n.xp6(1),n.Q6J("ngIf",g.itemsToChoose))},directives:[z.Z,e.sg,e.O5,e.PC,G.M],pipes:[e.Ov],styles:[".pulsate-fwd[_ngcontent-%COMP%]{-webkit-animation:pulsate-fwd .5s ease-in-out infinite both;animation:pulsate-fwd .5s ease-in-out infinite both}@-webkit-keyframes pulsate-fwd{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes pulsate-fwd{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.container[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr -webkit-min-content;grid-template-rows:1fr min-content;height:100%}.items[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:auto;position:relative}"],changeDetection:0});let Q=(()=>{class f{}return f.\u0275fac=function(g){return new(g||f)},f.\u0275mod=n.oAB({type:f}),f.\u0275inj=n.cJS({imports:[[e.ez,s.P.forChild(),v.P.forChild(),_,c.GameStepsModule.forChild([m.Z,i.g,W])]]}),f})()},8035:(M,E,t)=>{t.d(E,{P:()=>S});var e=t(9808),v=t(2747),i=t(5562),c=t(655),m=t(1340),s=t(1995),u=t(8397);class o{constructor(a){this.icon="",this.icon=`${u.J.getCustomGameThemeFolder()}${a.id}/img/set_icon.${a.ext}`}}var n=t(9146),_=t(4850),I=t(864),d=t(9082),C=t(5e3),D=t(520);class P extends d.S{constructor(a){super(),this._http=a}getAddItems(){const a=`${u.J.getCustomGameThemeFolder()}items_sets.${s.D.JSON}`;return this._fetchItemsSets(a).pipe((0,n.J)(),(0,_.U)(l=>new o(l)),(0,I.q)())}_fetchItemsSets(a){return this._http.get(a)}}P.\u0275fac=function(a){return new(a||P)(C.LFG(D.eN))},P.\u0275prov=C.Yz7({token:P,factory:P.\u0275fac}),(0,c.gn)([(0,m.q)()],P.prototype,"_fetchItemsSets",null);var A=t(1233);let S=(()=>{class h{static forChild(l){return{ngModule:h,providers:[{provide:d.S,useClass:(null==l?void 0:l.addStepService)||P}]}}}return h.\u0275fac=function(l){return new(l||h)},h.\u0275mod=C.oAB({type:h}),h.\u0275inj=C.cJS({providers:[],imports:[[e.ez,v.U,A.D,i.P]]}),h})()},5059:(M,E,t)=>{t.d(E,{g:()=>S});var e=t(6849),v=t(9771),i=t(1709),c=t(4850),m=t(1086),s=t(5e3),u=t(9082),o=t(2273),n=t(9808),_=t(9513),I=t(829);function d(h,a){1&h&&s.GkF(0)}const C=function(h){return{$implicit:h}};function D(h,a){if(1&h){const l=s.EpF();s.TgZ(0,"span",5),s.NdJ("click",function(){const R=s.CHM(l).index,L=s.oxw().ngIf,y=s.oxw();return y.choosePicture(R,{title:L.stepInfoTitle,style:{color:y.colors.PINK}})}),s.YNc(1,d,1,0,"ng-container",6),s.qZA()}if(2&h){const l=a.$implicit;s.oxw();const p=s.MAs(8),O=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",O.customSetTmpl||p)("ngTemplateOutletContext",s.VKq(2,C,l))}}function P(h,a){1&h&&s._UZ(0,"img",7),2&h&&s.Q6J("preloadImg",a.$implicit.icon)}function A(h,a){if(1&h&&(s.ynx(0),s.TgZ(1,"header"),s.TgZ(2,"h1",1),s._uU(3),s.ALo(4,"capitalizeFirstLetter"),s.qZA(),s.qZA(),s.TgZ(5,"div",2),s.YNc(6,D,2,4,"span",3),s.qZA(),s.YNc(7,P,1,1,"ng-template",null,4,s.W1O),s.BQk()),2&h){const l=a.ngIf;s.xp6(3),s.hij("",s.lcZ(4,2,l.title),":"),s.xp6(3),s.Q6J("ngForOf",l.sets)}}let S=(()=>{class h{constructor(l,p){this._addStepService=l,this._translationsService=p,this.customSetTmpl=null,this.content$=null,this.colors=v.r,this.title=""}ngOnInit(){this.content$=this._addStepService.getAddItems().pipe((0,i.zg)(l=>1===l.length?(this.choosePicture(),(0,m.of)(null)):this._translationsService.loadTranslation("add_steps").pipe((0,c.U)(p=>({sets:l,title:p.choose_picture,stepInfoTitle:p.to_choose_picture})))))}choosePicture(l=0,p=null){this._addStepService.chosenSetIndex=l,e.A.updateStepInfo(p),e.A.goToNext()}}return h.\u0275fac=function(l){return new(l||h)(s.Y36(u.S),s.Y36(o.f))},h.\u0275cmp=s.Xpm({type:h,selectors:[["pictures-choice"]],inputs:{customSetTmpl:"customSetTmpl"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"text--center"],[1,"pictures"],[3,"click",4,"ngFor","ngForOf"],["setTmpl",""],[3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d--block","w--100","cursor--pointer",3,"preloadImg"]],template:function(l,p){1&l&&(s.YNc(0,A,9,4,"ng-container",0),s.ALo(1,"async")),2&l&&s.Q6J("ngIf",s.lcZ(1,1,p.content$))},directives:[n.O5,n.sg,n.tP,_.n],pipes:[n.Ov,I.G],styles:[".pictures[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:3rem}"],changeDetection:0}),h})()},9254:(M,E,t)=>{t.d(E,{d:()=>u});var e=t(9808),v=t(2188),i=t(4729),c=t(8889),m=t(1834),s=t(5e3);let u=(()=>{class o extends c.l{constructor(_,I,d,C){super(d,C),this._elementRef=_,this._renderer=I,this.rowsAmount=1,this.columnsAmount=1,this.itemSize=300,this.coeff=1}ngOnInit(){super.ngOnInit(),this._renderer.setStyle(this._elementRef.nativeElement,v.L.DISPLAY,"grid"),this._renderer.setStyle(this._elementRef.nativeElement,v.L.GRID_GAP,`0.5${m.N.REM}`),this._renderer.setStyle(this._elementRef.nativeElement,v.L.JUSTIFY_CONTENT,"center")}setGameSizes(){const _=Math.min(this.itemSize,i.B.getGridContainerMinDimension()/Math.max(this.rowsAmount,this.columnsAmount)-12);this._renderer.setStyle(this._elementRef.nativeElement,v.L.GRID_TEMPLATE_COLUMNS,`repeat(${this.columnsAmount}, ${_}${m.N.PX})`),this._renderer.setStyle(this._elementRef.nativeElement,v.L.GRID_TEMPLATE_ROWS,`repeat(${this.rowsAmount}, ${_*this.coeff}${m.N.PX})`)}}return o.\u0275fac=function(_){return new(_||o)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.R0b),s.Y36(e.K0))},o.\u0275dir=s.lG2({type:o,selectors:[["","gridSizer",""]],inputs:{rowsAmount:"rowsAmount",columnsAmount:"columnsAmount",itemSize:"itemSize",coeff:"coeff"},features:[s.qOj]}),o})()},9513:(M,E,t)=>{t.d(E,{n:()=>u});var s,e=t(655),v=t(8744),i=t(2986),c=t(2868),m=t(5e3);class u{constructor(n,_){this._elementRef=n,this._renderer=_,s.set(this,null)}ngOnInit(){if("IMG"!==this._elementRef.nativeElement.tagName)throw new Error("Element should be an image");(0,e.YH)(this,s,v.O.getImage(this.src).pipe((0,i.q)(1),(0,c.b)(n=>this._renderer.setAttribute(this._elementRef.nativeElement,"src",n.src))).subscribe(),"f")}ngOnDestroy(){var n;null===(n=(0,e.Q_)(this,s,"f"))||void 0===n||n.unsubscribe()}}s=new WeakMap,u.\u0275fac=function(n){return new(n||u)(m.Y36(m.SBq),m.Y36(m.Qsj))},u.\u0275dir=m.lG2({type:u,selectors:[["","preloadImg",""]],inputs:{src:["preloadImg","src"]}})},9117:(M,E,t)=>{t.d(E,{W:()=>v});var e=t(2273);class v{constructor(c){this.id=null,this.title="",this.color="",this.route="",this.id=c.id,this.title=e.f.getTranslation(c.id),this.color=c.color,this.route=`${this.id}`}}},5605:(M,E,t)=>{t.d(E,{$:()=>e});class e{static shuffle(i){if(i.length<1)return console.warn("Empty array!"),i;const c=[...i];for(;!e._isArrShuffled(i,c);)c.sort(()=>Math.random()-.5);return c}static _isArrShuffled(i,c){let m=!1;for(const[s,u]of i.entries())if(u!==c[s]){m=!0;break}return m}static getRandItems(i,c=i.length){if(c>i.length)throw new Error(`maxArrLength ${c} should be equal or less than items length ${i.length}`);const m=e.shuffle(i);return m.length=c,m}static getDoubledRandItems(i,c=i.length){const m=e.getRandItems(i,c);return e.shuffle([...m,...m])}static uniq(i){return Array.from(new Set(i))}static getSequence(i,c=0){const m=[];for(let s=c;s<i;s++)m.push(s);return m}static groupArrByLength(i,c){const m=new Map;let s=0,u=0,o=0;for(;o<i.length;)u=s*c,o=u+c,m.set(s,i.slice(u,o)),s++;return m}static getRndInteger(i,c){return Math.floor(Math.random()*(c-i))+i}static getRndArrElem(i){return i[e.getRndInteger(0,i.length)]}}},4636:(M,E,t)=>{t.d(E,{Z:()=>h});var e=t(9424),v=t(4375),i=t(9771),c=t(6849),m=t(8397),s=t(2868),u=t(2273),o=t(5e3),n=t(2205),_=t(5316),I=t(5610),d=t(965),C=t(9808),D=t(9513),P=t(8550),A=t(829);function S(a,l){if(1&a){const p=o.EpF();o.TgZ(0,"figure",5),o.NdJ("click",function(R){const y=o.CHM(p).$implicit;return o.oxw().selectIcon(R,y)}),o._UZ(1,"img",6),o.TgZ(2,"figcaption"),o.TgZ(3,"div",7),o._uU(4),o.ALo(5,"capitalizeFirstLetter"),o.qZA(),o.qZA(),o.qZA()}if(2&a){const p=l.$implicit;o.xp6(1),o.Q6J("preloadImg",p.icon),o.xp6(3),o.Oqu(o.lcZ(5,2,p.title))}}let h=(()=>{class a extends v.Q{constructor(p,O){super(O),this._themesService=p,this.cdRef=O,this.category=e.G.getCategoryById("themes"),this.title=u.f.getTranslation("choose_theme"),this.searchPlaceHolder=`${u.f.getTranslation("search_theme")}...`,this.list$=null}selectIcon(p,O){p.stopPropagation(),m.J.setChosenTheme(O),c.A.updateStepInfo({title:O.title,style:{color:i.r.BLUE}}),c.A.goToNext()}buildList(){this.list$=this._themesService.getThemes().pipe((0,s.b)(()=>this.showList()))}}return a.\u0275fac=function(p){return new(p||a)(o.Y36(n.O),o.Y36(o.sBO))},a.\u0275cmp=o.Xpm({type:a,selectors:[["theme-choice"]],features:[o.qOj],decls:7,vars:10,consts:[[3,"category","title"],[3,"placeHolder","searchStrInput"],[3,"loaded"],[1,"list"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"list-item__img",3,"preloadImg"],[1,"list-item__title"]],template:function(p,O){1&p&&(o._UZ(0,"category-title",0),o.TgZ(1,"search-input",1),o.NdJ("searchStrInput",function(L){return O.searchStr=L}),o.qZA(),o.TgZ(2,"spinner-wrapper",2),o.TgZ(3,"div",3),o.YNc(4,S,6,4,"figure",4),o.ALo(5,"filterIcons"),o.ALo(6,"async"),o.qZA(),o.qZA()),2&p&&(o.Q6J("category",O.category)("title",O.title),o.xp6(1),o.Q6J("placeHolder",O.searchPlaceHolder),o.xp6(1),o.Q6J("loaded",O.loaded),o.xp6(2),o.Q6J("ngForOf",o.xi3(5,5,o.lcZ(6,8,O.list$),O.searchStr)))},directives:[_.a,I.J,d.C,C.sg,D.n],pipes:[P.V,C.Ov,A.G],styles:[".list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:3rem}.list-item[_ngcontent-%COMP%]{padding:10px;border-radius:30px 0;box-shadow:0 0 10px 18px #ffffffbf;background-color:#ffffffbf;border:solid 2px rgba(158,158,158,.15);cursor:pointer}.list-item[_ngcontent-%COMP%]:hover{background-color:#ffffffe6;border-color:#9e9e9e4d}.list-item__img[_ngcontent-%COMP%]{display:block;margin:auto}.list-item__title[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}"],changeDetection:0}),a})()},3832:(M,E,t)=>{t.d(E,{M:()=>n});var e=t(5e3),v=t(9808),i=t(9254),c=t(829);function m(_,I){if(1&_&&(e.TgZ(0,"header",2),e._uU(1),e.ALo(2,"capitalizeFirstLetter"),e.qZA()),2&_){const d=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,d.header))}}function s(_,I){if(1&_&&(e.TgZ(0,"figcaption",8),e._uU(1),e.qZA()),2&_){const d=e.oxw().$implicit;e.Q6J("ngStyle",d.titleStyle),e.xp6(1),e.hij(" ",d.title," ")}}function u(_,I){if(1&_){const d=e.EpF();e.TgZ(0,"figure",5),e.TgZ(1,"img",6),e.NdJ("click",function(D){const A=e.CHM(d).$implicit;return e.oxw(2).onItemClick(D,A)}),e.qZA(),e.YNc(2,s,2,2,"figcaption",7),e.qZA()}if(2&_){const d=I.$implicit,C=e.oxw(2);e.xp6(1),e.Q6J("src",d.img,e.LSH)("ngStyle",d.imgStyle),e.xp6(1),e.Q6J("ngIf",C.showTitle)}}function o(_,I){if(1&_&&(e.TgZ(0,"div",3),e.YNc(1,u,3,3,"figure",4),e.qZA()),2&_){const d=e.oxw();e.s9C("columnsAmount",d.items.length),e.xp6(1),e.Q6J("ngForOf",d.items)}}let n=(()=>{class _{constructor(){this.items=[],this.header="",this.showTitle=!1,this.itemClick=new e.vpe}onItemClick(d,C){d.stopPropagation(),this.itemClick.emit(C)}}return _.\u0275fac=function(d){return new(d||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["theme-items-bar"]],inputs:{items:"items",header:"header",showTitle:"showTitle"},outputs:{itemClick:"itemClick"},decls:2,vars:2,consts:[["class","header text--center",4,"ngIf"],["gridSizer","","itemSize","100",3,"columnsAmount",4,"ngIf"],[1,"header","text--center"],["gridSizer","","itemSize","100",3,"columnsAmount"],["class","figure d--flex m--auto h--100",4,"ngFor","ngForOf"],[1,"figure","d--flex","m--auto","h--100"],[1,"figure__img","d--block","m--auto","cursor--pointer",3,"src","ngStyle","click"],["class","figure__title text--center",3,"ngStyle",4,"ngIf"],[1,"figure__title","text--center",3,"ngStyle"]],template:function(d,C){1&d&&(e.YNc(0,m,3,3,"header",0),e.YNc(1,o,2,2,"div",1)),2&d&&(e.Q6J("ngIf",C.header),e.xp6(1),e.Q6J("ngIf",null==C.items?null:C.items.length))},directives:[v.O5,i.d,v.sg,v.PC],pipes:[c.G],styles:[".radial-gradient--soft-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#f0f0f0)}.radial-gradient--medium-grey[_ngcontent-%COMP%]{background:radial-gradient(white,#dbdbdb)}.header[_ngcontent-%COMP%]{font-size:2rem;font-style:italic}@media screen and (max-width: 567px){.header[_ngcontent-%COMP%]{font-size:1rem}}.figure[_ngcontent-%COMP%]{flex-direction:column}.figure__img[_ngcontent-%COMP%]{max-width:80%;max-height:80%}.figure__title[_ngcontent-%COMP%]{font-size:1.25rem}@media screen and (max-width: 567px){.figure__title[_ngcontent-%COMP%]{font-size:1rem}}@media screen and (max-width: 480px){.figure__title[_ngcontent-%COMP%]{display:none}}"]}),_})()}}]);