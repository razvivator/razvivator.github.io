"use strict";(self.webpackChunkrazvivator=self.webpackChunkrazvivator||[]).push([[997],{9424:(T,d,t)=>{t.d(d,{G:()=>o});var s=t(6330),r=t(9117);class o{static getCategoryById(i){return o.categories.find(l=>l.id===i)}}o.categories=s.a.map(h=>new r.W(h))},4375:(T,d,t)=>{t.d(d,{Q:()=>r});var s=t(5e3);let r=(()=>{class o{constructor(i){this.cdRef=i,this.searchStr="",this.loaded=!1}ngOnInit(){this.buildList()}showList(){setTimeout(()=>{this.loaded=!0,this.cdRef.markForCheck()},300)}}return o.\u0275fac=function(i){return new(i||o)(s.Y36(s.sBO))},o.\u0275dir=s.lG2({type:o}),o})()},9082:(T,d,t)=>{t.d(d,{S:()=>r});var s=t(5e3);let r=(()=>{class o{constructor(){this.chosenSetIndex=null}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=s.Yz7({token:o,factory:o.\u0275fac}),o})()},5316:(T,d,t)=>{t.d(d,{a:()=>o});var s=t(5e3),r=t(829);let o=(()=>{class h{constructor(){this.title="",this.category=null}}return h.\u0275fac=function(l){return new(l||h)},h.\u0275cmp=s.Xpm({type:h,selectors:[["category-title"]],inputs:{title:"title",category:"category"},decls:3,vars:5,consts:[[1,"title"]],template:function(l,m){1&l&&(s.TgZ(0,"div",0),s._uU(1),s.ALo(2,"capitalizeFirstLetter"),s.qZA()),2&l&&(s.Udp("color",null==m.category?null:m.category.color),s.xp6(1),s.hij(" ",s.lcZ(2,3,m.title),"\n"))},pipes:[r.G],styles:[".title[_ngcontent-%COMP%]{font-size:2rem;text-shadow:0 1px 0 #fff,0 2px 0 #fff,0 3px 0 #fff,0 4px 2px #fff,1px 0 0 #fff,2px 0 0 #fff,3px 0 0 #fff,4px 0 2px #fff,0 -1px 0 #fff,0 -2px 0 #fff,0 -3px 0 #fff,0 -4px 2px #fff,-1px 0 0 #fff,-2px 0 0 #fff,-3px 0 0 #fff,-4px 0 2px #fff}"],changeDetection:0}),h})()},5610:(T,d,t)=>{t.d(d,{J:()=>P});var s=t(655),r=t(5e3),o=t(8929),h=t(3489),i=t(353);class m{constructor(e,n){this.dueTime=e,this.scheduler=n}call(e,n){return n.subscribe(new f(e,this.dueTime,this.scheduler))}}class f extends h.L{constructor(e,n,v){super(e),this.dueTime=n,this.scheduler=v,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(p,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function p(a){a.debouncedNext()}class I{constructor(e,n){this.compare=e,this.keySelector=n}call(e,n){return n.subscribe(new C(e,this.compare,this.keySelector))}}class C extends h.L{constructor(e,n,v){super(e),this.keySelector=v,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}compare(e,n){return e===n}_next(e){let n;try{const{keySelector:O}=this;n=O?O(e):e}catch(O){return this.destination.error(O)}let v=!1;if(this.hasKey)try{const{compare:O}=this;v=O(this.key,n)}catch(O){return this.destination.error(O)}else this.hasKey=!0;v||(this.key=n,this.destination.next(e))}}var D,M=t(2868),U=t(9771),E=t(9808),L=t(829);const g=function(a,e){return{color:a,"border-color":e}};class P{constructor(){this.placeHolder="",this.searchStrInput=new r.vpe,this.colors=U.r,this.searchSubject$=new o.xQ,D.set(this,null)}ngOnInit(){(0,s.YH)(this,D,this.searchSubject$.pipe(function l(a,e=i.P){return n=>n.lift(new m(a,e))}(500),function u(a,e){return n=>n.lift(new I(a,e))}(),(0,M.b)(e=>this.searchStrInput.emit(e))).subscribe(),"f")}ngOnDestroy(){var e;null===(e=(0,s.Q_)(this,D,"f"))||void 0===e||e.unsubscribe()}}D=new WeakMap,P.\u0275fac=function(e){return new(e||P)},P.\u0275cmp=r.Xpm({type:P,selectors:[["search-input"]],inputs:{placeHolder:"placeHolder"},outputs:{searchStrInput:"searchStrInput"},decls:3,vars:7,consts:[["type","text",1,"search",3,"placeholder","ngStyle","input"],["search",""]],template:function(e,n){if(1&e){const v=r.EpF();r.TgZ(0,"input",0,1),r.NdJ("input",function(){r.CHM(v);const S=r.MAs(1);return n.searchSubject$.next(S.value)}),r.ALo(2,"capitalizeFirstLetter"),r.qZA()}2&e&&(r.s9C("placeholder",r.lcZ(2,2,n.placeHolder)),r.Q6J("ngStyle",r.WLB(4,g,n.colors.DARK_GREY,n.colors.LIGHT_GREY)))},directives:[E.PC],pipes:[L.G],styles:[".search[_ngcontent-%COMP%]{width:100%;height:3rem;margin-bottom:3rem;font-family:coquettec,sans-serif;font-size:1.5rem;border-radius:12px;outline:none;border:2px solid;padding:6px 12px}"],changeDetection:0})},965:(T,d,t)=>{t.d(d,{C:()=>m});var s=t(5e3),r=t(9808),o=t(2925);function h(f,p){1&f&&s._UZ(0,"spinner")}function i(f,p){1&f&&s.Hsn(0,0,["*ngIf","loaded"])}const l=["*"];let m=(()=>{class f{constructor(){this.loaded=!1}}return f.\u0275fac=function(u){return new(u||f)},f.\u0275cmp=s.Xpm({type:f,selectors:[["spinner-wrapper"]],inputs:{loaded:"loaded"},ngContentSelectors:l,decls:2,vars:2,consts:[[4,"ngIf"]],template:function(u,I){1&u&&(s.F$t(),s.YNc(0,h,1,0,"spinner",0),s.YNc(1,i,1,0,"ng-content",0)),2&u&&(s.Q6J("ngIf",!I.loaded),s.xp6(1),s.Q6J("ngIf",I.loaded))},directives:[r.O5,o.O],encapsulation:2,changeDetection:0}),f})()},8550:(T,d,t)=>{t.d(d,{V:()=>r});var s=t(5e3);let r=(()=>{class o{transform(i,l){return(null==i?void 0:i.length)?l?i.filter(m=>this._searchPredicate(m,l)):i:[]}_searchPredicate(i,l){return i.title.toLowerCase().includes(l.toLowerCase())}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275pipe=s.Yjl({name:"filterIcons",type:o,pure:!0}),o})()},8174:(T,d,t)=>{t.d(d,{K:()=>o});var s=t(4475),r=t(5851);class o extends r.b{constructor(i,l){super(i,l),this.themes=null,this.themes=this._getCommonThemes(i).map(m=>new s.m(m,l))}_getCommonThemes(i){return i.themes||this.id.split("__").map(l=>({id:l}))}}},2281:(T,d,t)=>{t.d(d,{r:()=>S});var s=t(655),r=t(1340),o=t(8744),h=t(8174),i=t(4475),l=t(8397),m=t(9417);class f{constructor(c,_,y,W){this.theme=_,this.title=y,this.id="",this.img="",this.hasOwnSound=!1,this.titleSoundUrl="",this.ownSoundUrl="",this.titleStyle=null,this.imgStyle=null,this.id=c.id,this.img=l.J.getItemImg(c,_.id,_.isCustomItems,W),this.hasOwnSound=c.hasOwnSound,this.titleSoundUrl=l.J.getTitleSoundUrl(_.id,this.id),this.ownSoundUrl=l.J.getOwnSoundUrl(_.id,this.id)}playTitle(){return(0,s.mG)(this,void 0,void 0,function*(){yield m.d.playSound(this.titleSoundUrl)})}playOwnSound(){return(0,s.mG)(this,void 0,void 0,function*(){yield m.d.playSound(this.ownSoundUrl)})}}var p=t(8514),u=t(8896),C=t(1737),M=t(1086),U=t(567),E=t(9146),L=t(1709),D=t(864),g=t(2198),P=t(7545),a=t(4850),e=t(5e3),n=t(520),v=t(2273),O=t(9082);class S{constructor(c,_,y){this._http=c,this._translationsService=_,this._addStepsService=y}static preloadThemeItemsImgs(c){return o.O.getImages(c.map(_=>_.img))}getItems(c=(()=>!0)){const _=l.J.getChosenTheme();return _ instanceof i.m?this._getAllItemsForSingleTheme(_,c):_ instanceof h.K?this._getAllItemsForCombinedTheme(_,c):(0,C._)("Unknown theme instance")}_getAllItemsForCombinedTheme(c,_){return(0,M.of)(c.isCustomItems?[c]:c.themes).pipe((0,E.J)(),(0,L.zg)(y=>this._getAllItemsForSingleTheme(y,_)),(0,E.J)(),(0,D.q)())}_getAllItemsForSingleTheme(c,_){var y;return(0,U.D)({itemsProps:this._fetchItems(l.J.getItemsUrl(c.id,c.isCustomItems,null===(y=this._addStepsService)||void 0===y?void 0:y.chosenSetIndex)),translations:c.isCustomItems?(0,M.of)({}):this._translationsService.loadTranslation(`themes/items/${c.id}`)}).pipe((0,L.zg)(W=>(0,M.of)(W.itemsProps).pipe((0,E.J)(),(0,g.h)(_),(0,D.q)(),(0,P.w)(x=>function I(K,c=u.E,_=u.E){return(0,p.P)(()=>K()?c:_)}(()=>{var A;return(null===(A=c.themeItemsIds)||void 0===A?void 0:A.length)>0},(0,M.of)(c.themeItemsIds).pipe((0,E.J)(),(0,a.U)(A=>x.find(B=>B.id===A))),(0,M.of)(x).pipe((0,E.J)()))),(0,a.U)(x=>{var A;return new f(x,c,W.translations[x.id],null===(A=this._addStepsService)||void 0===A?void 0:A.chosenSetIndex)}),(0,D.q)())))}_fetchItems(c){return this._http.get(c)}}S.\u0275fac=function(c){return new(c||S)(e.LFG(n.eN),e.LFG(v.f),e.LFG(O.S,8))},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac}),(0,s.gn)([(0,r.q)()],S.prototype,"_fetchItems",null)},2205:(T,d,t)=>{t.d(d,{O:()=>g});var s=t(655),r=t(1340),o=t(4729),h=t(150),i=t(8174),l=t(4475),m=t(8397),f=t(567),p=t(1086),u=t(1709),I=t(9146),C=t(4850),M=t(864),U=t(7221),E=t(5e3),L=t(520),D=t(2273);class g{constructor(a,e,n){this._http=a,this._translationsService=e,this._ageDependency=n}getThemes(a=o.B.chosenGameId){return this._fetchThemes(m.J.getGameThemesUrl(a,this._ageDependency)).pipe((0,u.zg)(e=>(0,f.D)({commonThemesTranslations:this._getCommonThemesTranslations(e),commonCustomThemesTranslations:this._getCommonCustomThemesTranslations(e,a),combinedThemesTranslations:this._getCombinedThemesTranslations(e),combinedCustomThemesTranslations:this._getCombinedCustomThemesTranslations(e,a),config:(0,p.of)(e)}).pipe((0,u.zg)(n=>(0,p.of)(n.config).pipe((0,I.J)(),(0,C.U)(v=>m.J.isCommonTheme(v)?new l.m(v,Object.assign(Object.assign({},n.commonThemesTranslations),n.commonCustomThemesTranslations)):m.J.isCombinedTheme(v)?new i.K(v,Object.assign(Object.assign({},n.combinedThemesTranslations),n.combinedCustomThemesTranslations)):(console.error(`Unknown theme ${v.id} in config ${JSON.stringify(v)}`),null)),(0,M.q)())))))}_getCommonThemesTranslations(a){return a.some(e=>m.J.isCommonTheme(e))?this._translationsService.loadTranslation("themes/common"):(0,p.of)(null)}_getCommonCustomThemesTranslations(a,e){return a.some(n=>m.J.isCommonTheme(n))?this._translationsService.loadTranslation(`themes/common_custom/${e}`).pipe((0,U.K)(()=>(0,p.of)(null))):(0,p.of)(null)}_getCombinedThemesTranslations(a){return a.some(e=>m.J.isCombinedTheme(e))?this._translationsService.loadTranslation("themes/combined"):(0,p.of)(null)}_getCombinedCustomThemesTranslations(a,e){return a.some(n=>m.J.isCombinedTheme(n))?this._translationsService.loadTranslation(`themes/combined_custom/${e}`).pipe((0,U.K)(()=>(0,p.of)(null))):(0,p.of)(null)}_fetchThemes(a){return this._http.get(a)}}g.\u0275fac=function(a){return new(a||g)(E.LFG(L.eN),E.LFG(D.f),E.LFG(h.V))},g.\u0275prov=E.Yz7({token:g,factory:g.\u0275fac}),(0,s.gn)([(0,r.q)()],g.prototype,"_fetchThemes",null)},5562:(T,d,t)=>{t.d(d,{P:()=>p});var s=t(9808),r=t(933),o=t(2747),h=t(1233),i=t(2281),l=t(2205),m=t(150),f=t(5e3);let p=(()=>{class u{static forChild(C){return{ngModule:u,providers:[{provide:m.V,useValue:null==C?void 0:C.ageDependency}]}}}return u.\u0275fac=function(C){return new(C||u)},u.\u0275mod=f.oAB({type:u}),u.\u0275inj=f.cJS({providers:[l.O,i.r],imports:[[s.ez,r.q,o.U,h.D]]}),u})()},150:(T,d,t)=>{t.d(d,{V:()=>r});const r=new(t(5e3).OlP)("AGE_DEPENDENCY")}}]);